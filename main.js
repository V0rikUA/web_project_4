!function(){"use strict";class e{constructor(e){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._fieldSelector=e.fieldSelector,this._formElement=document.querySelector(this._formSelector),this._fieldsetElement=this._formElement.querySelector(this._fieldSelector),this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const i=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),i.textContent=t,i.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t){this._name=e.name,this._link=e.link,this._cardTemplateSelector=t.cardTemplateSelector,this._cardSelector=t.cardSelector,this._imageSelector=t.imageSelector,this._imageDescriptionSelector=t.imageDescriptionSelector,this._likeButtonSelector=t.likeButtonSelector,this._likeActiveSelector=t.likeActiveSelector,this._deleteButtonSelector=t.deleteButtonSelector,this._previewPopupImageSelector=t.previewPopupImageSelector,this._previewPopupDescriptionSelector=t.previewPopupDescriptionSelector,this._handleCardImageClick=t.handleCardImageClick,this._cardTemplate=document.querySelector(this._cardTemplateSelector)}_getCardElement(){return this._cardTemplate.content.querySelector(this._cardSelector).cloneNode(!0)}_populateCardInfo(){const e=this._cardElement.querySelector(this._imageDescriptionSelector),t=this._cardElement.querySelector(this._imageSelector);e.textContent=this._name,t.src=this._link,t.alt=this._name}_handleLikeButtonClick(){this._likeButton.classList.toggle(this._likeActiveSelector)}_handleDeleteButtonClick(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._likeButton=this._cardElement.querySelector(this._likeButtonSelector),this._likeButton.addEventListener("click",(()=>this._handleLikeButtonClick())),this._cardElement.querySelector(this._deleteButtonSelector).addEventListener("click",(()=>this._handleDeleteButtonClick())),this._cardElement.querySelector(this._imageSelector).addEventListener("click",(()=>{this._handleCardImageClick(this._link,this._name,this._name)}))}getCard(){return this._cardElement=this._getCardElement(),this._populateCardInfo(),this._setEventListeners(),this._cardElement}}const i=document.querySelector(".profile__button-edit"),s=document.querySelector(".form__input_type_name"),r=document.querySelector(".form__input_type_title"),o=document.querySelector(".profile__button-add-contetnt"),n=(document.querySelector(".form_type_new-gallery-item"),".popup_type_preview");class l{constructor(e){this._popupElement=document.querySelector(e),this._popupCloseButton=this._popupElement.querySelector(".popup__close-button"),this._popupActiveToggleSelector="popup_active",this._handleEscClose=this._handleEscClose.bind(this),this._handleBackgroundClickClose=this._handleBackgroundClickClose.bind(this),this.close=this.close.bind(this)}open(){this._popupElement.classList.add(this._popupActiveToggleSelector),this.setEventListeners()}close(){this._popupElement.classList.remove(this._popupActiveToggleSelector),this.removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleBackgroundClickClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._popupCloseButton.addEventListener("click",this.close),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleBackgroundClickClose)}removeEventListeners(){this._popupCloseButton.removeEventListener("click",this.close),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleBackgroundClickClose)}}class a extends l{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector("form"),this._handleSubmitButton=this._handleSubmitButton.bind(this)}_getInputValues(){return Array.from(this._popupElement.querySelectorAll("input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}_handleSubmitButton(e){e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._handleSubmitButton)}removeEventListeners(){super.removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmitButton)}close(){super.close(),this._form.reset()}}const c=new class{constructor(e,t){this._userNameElement=document.querySelector(e),this._userProfessionElement=document.querySelector(t)}getUserInfo(){return{userName:this._userNameElement.textContent,userJob:this._userProfessionElement.textContent}}setUserInfo(e,t){this._userNameElement.textContent=e,this._userProfessionElement.textContent=t}}(".profile__name",".profile__profession"),u=new class extends l{constructor(e){super(e),this._previewPopupImage=document.querySelector(".popup__preview-image"),this._previewPopupDescription=document.querySelector(".popup__description")}open(e,t,i){this._previewPopupImage.src=e,this._previewPopupImage.alt=t,this._previewPopupDescription.textContent=i,super.open()}}(n),_=new a(".popup_type_profile",(e=>{c.setUserInfo(e.name,e.about),_.close()})),p=new a(".popup_type_new-gallery-item",(e=>{const t={name:e.newItemTitle,link:e.newItemImageLink};p.close(),v.addItem(t)})),h={cardTemplateSelector:"#gallary-list__item__template",cardSelector:".gallery-list__item",imageSelector:".gallery-list__image",imageDescriptionSelector:".gallery-list__image-description",likeActiveSelector:"gallery-list__like-button-active",likeButtonSelector:".gallery-list__like-button",deleteButtonSelector:".gallery-list__delete-button",previewPopupImageSelector:".popup__preview-image",previewPopupDescriptionSelector:".popup__description",previewPopupElement:n,handleCardImageClick:(e,t,i)=>{u.open(e,t,i)}},m=new e({formSelector:".form_type_profile",inputSelector:".form__input",errorClass:"form__input-error_active",inactiveButtonClass:"form__submit-button-inactive",inputErrorClass:"form__input_type_error",submitButtonSelector:".form__submit-button",fieldSelector:".form__set-profile"}),d=new e({formSelector:".form_type_new-gallery-item",inputSelector:".form__input",errorClass:"form__input-error_active",inactiveButtonClass:"form__submit-button-inactive",inputErrorClass:"form__input_type_error",submitButtonSelector:".form__submit-button",fieldSelector:".form__set-gallery"}),v=new class{constructor(e,t){let{items:i=null,renderer:s}=e;this._items=i,this._renderer=s,this._container=document.querySelector(t)}renderer(){if(null!==this._items)try{this._items.forEach((e=>{this.addItem(e)}))}catch(e){throw e instanceof TypeError?"items variable is not of type Array":"".concat(e)}}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg",alt:"the view of the river surrounded by trees in front of mountains"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg",alt:"the view of lake between two mountains"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg",alt:"the view of sunset upon the mountains"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg",alt:"the view of mountains at night under the bright stars"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg",alt:"lake view in the mountains"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg",alt:"the view of the boats at mountain lake near the pier"}],renderer:e=>new t(e,h).getCard()},".gallery-list");v.renderer(),i.addEventListener("click",(()=>{var e;e=c.getUserInfo(),s.value=e.userName,r.value=e.userJob,m.resetValidation(),_.open()})),o.addEventListener("click",(()=>{d.resetValidation(),p.open()})),m.enableValidation(),d.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNFMUosS0FBSzBKLE9BQU9qSCxTQUFTb0gsSUFDbkI3SixLQUFLa0osUUFBUVcsTUFFZixNQUFPQyxHQUNQLE1BQUlBLGFBQWlCQyxVQUNiLHNDQUVBLEdBQU4sT0FBU0QsSUFNakJaLFFBQVFXLEdBQ04sTUFBTUcsRUFBYWhLLEtBQUsySixVQUFVRSxHQUNsQzdKLEtBQUs0SixXQUFXSyxRQUFRRCxLSG9FSyxDQUFFUixNSHJGUCxDQUMxQixDQUNFdEcsS0FBTSxrQkFDTkUsS0FBTSxtREFDTjhCLElBQUssbUVBRVAsQ0FDRWhDLEtBQU0sY0FDTkUsS0FBTSxzREFDTjhCLElBQUssMENBRVAsQ0FDRWhDLEtBQU0saUJBQ05FLEtBQU0seURBQ044QixJQUFLLHlDQUVQLENBQ0VoQyxLQUFNLFVBQ05FLEtBQU0sa0RBQ044QixJQUFLLHlEQUVQLENBQ0VoQyxLQUFNLHdCQUNORSxLQUFNLGtEQUNOOEIsSUFBSyw4QkFFUCxDQUNFaEMsS0FBTSxpQkFDTkUsS0FBTSwrQ0FDTjhCLElBQUsseURHd0R3RHVFLFNBTjdDUyxHQUNMLElBQUluSCxFQUFLbUgsRUFBVWYsR0FDcEI1RCxXSHJGMEIsaUJHMEZ4QzBELEVBQWFRLFdBR2JoQixFQUFBQSxpQkFBNEMsU0FyRVosS0FMUDBCLFFBTVZ2QyxFQUFTSyxjQUx0QlEsRUFBQUEsTUFBK0IwQixFQUFLakMsU0FDcENPLEVBQUFBLE1BQXFDMEIsRUFBS2hDLFFBTzFDa0IsRUFBcUIxRyxrQkFDckIrRixFQUFxQnBDLFVBaUV2Qm1DLEVBQUFBLGlCQUErQyxTQTlEbkIsS0FDMUJhLEVBQXFCM0csa0JBQ3JCa0csRUFBbUJ2QyxVQStEckIrQyxFQUFxQnpHLG1CQUNyQjBHLEVBQXFCMUcsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9maWVsZFNlbGVjdG9yID0gY29uZmlnLmZpZWxkU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9maWVsZHNldEVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ZpZWxkU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKkBwYXJhbSB7RnVuY3Rpb259IGNvbmZpZy50b2dnbGVQb3B1cCByZXF1aWVyZXMgZnVuY3Rpb24gdG8gYmUgcGFzc2VkXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY2FyZCwgY29uZmlnKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmQubGluaztcclxuXHJcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGVTZWxlY3RvciA9IGNvbmZpZy5jYXJkVGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNvbmZpZy5jYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZVNlbGVjdG9yID0gY29uZmlnLmltYWdlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZURlc2NyaXB0aW9uU2VsZWN0b3IgPSBjb25maWcuaW1hZ2VEZXNjcmlwdGlvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvblNlbGVjdG9yID0gY29uZmlnLmxpa2VCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2xpa2VBY3RpdmVTZWxlY3RvciA9IGNvbmZpZy5saWtlQWN0aXZlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5kZWxldGVCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cEltYWdlU2VsZWN0b3IgPSBjb25maWcucHJldmlld1BvcHVwSW1hZ2VTZWxlY3RvcjtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cERlc2NyaXB0aW9uU2VsZWN0b3IgPSBjb25maWcucHJldmlld1BvcHVwRGVzY3JpcHRpb25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrID0gY29uZmlnLmhhbmRsZUNhcmRJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGVtcGxhdGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZFRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9wb3B1bGF0ZUNhcmRJbmZvKCkge1xyXG4gICAgY29uc3QgY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW1hZ2VEZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlU2VsZWN0b3IpO1xyXG4gICAgY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2xpa2VBY3RpdmVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2xpa2VCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2soKSk7XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9kZWxldGVCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKCkpO1xyXG5cclxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbWFnZVNlbGVjdG9yKTtcclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUsIHRoaXMuX25hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZXR1cm4gYW4gY2FyZCBlbGVtZW50XHJcbiAgICovXHJcblxyXG4gIGdldENhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldENhcmRFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9wb3B1bGF0ZUNhcmRJbmZvKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCIvL2NyZWRlbnRpYWxzcyB2YXJpYWJsZXNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTsgLy9cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7IC8vXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJvZmVzc2lvblNlbGVjdG9yID0gXCIucHJvZmlsZV9fcHJvZmVzc2lvblwiOyAvL1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIjsgLy9cclxuZXhwb3J0IGNvbnN0IHVzZXJJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTsgLy9cclxuZXhwb3J0IGNvbnN0IHVzZXJJbnB1dFByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfdGl0bGVcIik7IC8vXHJcblxyXG4vL05ld0NhcmQgdmFyaWFibGVzXHJcbmV4cG9ydCBjb25zdCBhZGRHYWxsZXJ5SXRlbUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZC1jb250ZXRudFwiKTsgLy9cclxuZXhwb3J0IGNvbnN0IGdhbGxlcnlJdGVtc0xpc3RTZWxlY3RvciA9IFwiLmdhbGxlcnktbGlzdFwiOyAvL1xyXG5leHBvcnQgY29uc3QgbmV3SXRlbVBvcHVwU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIjsgLy9cclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRHYWxsZXJ5SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gICAgYWx0OiBcInRoZSB2aWV3IG9mIHRoZSByaXZlciBzdXJyb3VuZGVkIGJ5IHRyZWVzIGluIGZyb250IG9mIG1vdW50YWluc1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICAgIGFsdDogXCJ0aGUgdmlldyBvZiBsYWtlIGJldHdlZW4gdHdvIG1vdW50YWluc1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIGFsdDogXCJ0aGUgdmlldyBvZiBzdW5zZXQgdXBvbiB0aGUgbW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICAgIGFsdDogXCJ0aGUgdmlldyBvZiBtb3VudGFpbnMgYXQgbmlnaHQgdW5kZXIgdGhlIGJyaWdodCBzdGFyc1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICAgIGFsdDogXCJsYWtlIHZpZXcgaW4gdGhlIG1vdW50YWluc1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gICAgYWx0OiBcInRoZSB2aWV3IG9mIHRoZSBib2F0cyBhdCBtb3VudGFpbiBsYWtlIG5lYXIgdGhlIHBpZXJcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy9QcmV3aWV2IHZhcmlhYmxlXHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3UG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcHJldmlld1wiOyAvL1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9wdXBTZWxlY3RvciBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3BvcHVwQWN0aXZlVG9nZ2xlU2VsZWN0b3IgPSBcInBvcHVwX2FjdGl2ZVwiO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlID0gdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBhZGQgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyB0byBtb2RhbCB3aW5kb3cgdGFnIHRvIHJpc2UgaXQgdXBcclxuICAgKi9cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBoYW5kbGUgY2xvc2UgbW9kYWwgd2luZG93IHdoZW4gRXNjYXBlIGlzIGRvd25cclxuICAgKi9cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlzS2V5RG93bkVzYyA9IGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIjtcclxuICAgIGlmIChpc0tleURvd25Fc2MpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogaGFuZGxlIGNsb3NlIG1vZGFsIHdpbmRvdyB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBfaGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2V0IGV2ZW50IGxpc3RlbmVycyB0byBjbG9zZSBidXR0b24gY2xpY2ssIGNsb3NlIG9uIEVzYyBkb3duIGFuZCB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnNcclxuICAgKi9cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9wdXBTZWxlY3RvciBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUZvcm1TdWJtaXQgYSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBQb3B1cFdpdGhGb3JtIGNhbGxzIHdoZW4gdGhlIGZvcm3igJlzIHN1Ym1pdCBldmVudCBmaXJlc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbi5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKmNvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmRcclxuICAgKiBAcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBkYXRhLlxyXG4gICAqXHJcbiAgICovXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKSkucmVkdWNlKFxyXG4gICAgICAoYWNjLCBpbnB1dCkgPT4gKHsgLi4uYWNjLCBbaW5wdXQubmFtZV06IGlucHV0LnZhbHVlIH0pLFxyXG4gICAgICB7fVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXRCdXR0b24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVzZXQgZm9ybSBpbnB1dCBmaWVsZHNcclxuICAgKi9cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuXHJcbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1fdHlwZV9wcm9maWxlXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbi1pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBmaWVsZFNlbGVjdG9yOiBcIi5mb3JtX19zZXQtcHJvZmlsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgZm9ybU5ld0NhcmRWYWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybV90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uLWluYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGZpZWxkU2VsZWN0b3I6IFwiLmZvcm1fX3NldC1nYWxsZXJ5XCIsXHJcbn07XHJcblxyXG5jb25zdCBmaWxsUHJvZmlsZUluZm8gPSAoaW5mbykgPT4ge1xyXG4gIGNvbnN0YW50LnVzZXJJbnB1dE5hbWUudmFsdWUgPSBpbmZvLnVzZXJOYW1lO1xyXG4gIGNvbnN0YW50LnVzZXJJbnB1dFByb2Zlc3Npb24udmFsdWUgPSBpbmZvLnVzZXJKb2I7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVQcm9maWxlRWRpdFdpbmRvdyA9ICgpID0+IHtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBmaWxsUHJvZmlsZUluZm8oaW5mbyk7XHJcblxyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwV2l0aEZvcm1Qcm9maWxlLm9wZW4oKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZU5ld0l0ZW1XaW5kb3cgPSAoKSA9PiB7XHJcbiAgbmV3Q2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBXaXRoRm9ybUltYWdlLm9wZW4oKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKHVzZXJJbnB1dCkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJJbnB1dC5uYW1lLCB1c2VySW5wdXQuYWJvdXQpO1xyXG4gIHBvcHVwV2l0aEZvcm1Qcm9maWxlLmNsb3NlKCk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVOZXdJdGVtU3VibWl0ID0gKHVzZXJJbnB1dCkgPT4ge1xyXG4gIGNvbnN0IG5ld0l0ZW0gPSB7XHJcbiAgICBuYW1lOiB1c2VySW5wdXQubmV3SXRlbVRpdGxlLFxyXG4gICAgbGluazogdXNlcklucHV0Lm5ld0l0ZW1JbWFnZUxpbmssXHJcbiAgfTtcclxuXHJcbiAgcG9wdXBXaXRoRm9ybUltYWdlLmNsb3NlKCk7XHJcblxyXG4gIGNhcmRSZW5kZXJlci5hZGRJdGVtKG5ld0l0ZW0pO1xyXG59O1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oY29uc3RhbnQucHJvZmlsZU5hbWVTZWxlY3RvciwgY29uc3RhbnQucHJvZmlsZVByb2Zlc3Npb25TZWxlY3Rvcik7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGNvbnN0YW50LnByZXZpZXdQb3B1cFNlbGVjdG9yKTtcclxuY29uc3QgcG9wdXBXaXRoRm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudC5wb3B1cFByb2ZpbGVTZWxlY3RvciwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cFdpdGhGb3JtSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudC5uZXdJdGVtUG9wdXBTZWxlY3RvciwgaGFuZGxlTmV3SXRlbVN1Ym1pdCk7XHJcblxyXG5jb25zdCBjYXJkQ29uZmlnID0ge1xyXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yOiBcIiNnYWxsYXJ5LWxpc3RfX2l0ZW1fX3RlbXBsYXRlXCIsXHJcbiAgY2FyZFNlbGVjdG9yOiBcIi5nYWxsZXJ5LWxpc3RfX2l0ZW1cIixcclxuICBpbWFnZVNlbGVjdG9yOiBcIi5nYWxsZXJ5LWxpc3RfX2ltYWdlXCIsXHJcbiAgaW1hZ2VEZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5nYWxsZXJ5LWxpc3RfX2ltYWdlLWRlc2NyaXB0aW9uXCIsXHJcbiAgbGlrZUFjdGl2ZVNlbGVjdG9yOiBcImdhbGxlcnktbGlzdF9fbGlrZS1idXR0b24tYWN0aXZlXCIsXHJcbiAgbGlrZUJ1dHRvblNlbGVjdG9yOiBcIi5nYWxsZXJ5LWxpc3RfX2xpa2UtYnV0dG9uXCIsXHJcbiAgZGVsZXRlQnV0dG9uU2VsZWN0b3I6IFwiLmdhbGxlcnktbGlzdF9fZGVsZXRlLWJ1dHRvblwiLFxyXG4gIHByZXZpZXdQb3B1cEltYWdlU2VsZWN0b3I6IFwiLnBvcHVwX19wcmV2aWV3LWltYWdlXCIsXHJcbiAgcHJldmlld1BvcHVwRGVzY3JpcHRpb25TZWxlY3RvcjogXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgcHJldmlld1BvcHVwRWxlbWVudDogY29uc3RhbnQucHJldmlld1BvcHVwU2VsZWN0b3IsXHJcbiAgaGFuZGxlQ2FyZEltYWdlQ2xpY2s6IChzcmMsIG5hbWUsIGRlc2NyaXB0aW9uKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKHNyYywgbmFtZSwgZGVzY3JpcHRpb24pO1xyXG4gIH0sXHJcbn07XHJcblxyXG4vL2NyZWF0ZSBmb3JtIHZhbGlkYXRpYW4gaW5zdGFuY2VzIHRvIGNoZWNrIGZvcm0gaW5wdXQgZmllbGRzXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVByb2ZpbGVWYWxpZGF0aW9uQ29uZmlnKTtcclxuY29uc3QgbmV3Q2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtTmV3Q2FyZFZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYXJkSXRlbSBvYmplY3QgdGhhdCBjb250YWlucyBuYW1lIGFuZCBsaW5rIG9mIG5ldyBjYXJkXHJcbiAqIEByZXR1cm5zIGFuIGNhcmQgZWxlbWVudFxyXG4gKi9cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkSXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkSXRlbSwgY2FyZENvbmZpZyk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0Q2FyZCgpO1xyXG59O1xyXG5cclxuLy9jcmVhdGUgaW5zdGFuY2Ugb2YgY2FyZCByZW5kZXJlciB0byBhZGQgY2FyZCB0byB0aGUgcGFnZVxyXG5jb25zdCBjYXJkUmVuZGVyZXIgPSBuZXcgU2VjdGlvbih7IGl0ZW1zOiBjb25zdGFudC5pbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sIGNvbnN0YW50LmdhbGxlcnlJdGVtc0xpc3RTZWxlY3Rvcik7XHJcbmNhcmRSZW5kZXJlci5yZW5kZXJlcigpO1xyXG5cclxuLy9BZGQgZXZlbnQgTGlzdGVuZXJzIHRvIGJ1dHRvbnNcclxuY29uc3RhbnQucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVByb2ZpbGVFZGl0V2luZG93KTtcclxuY29uc3RhbnQuYWRkR2FsbGVyeUl0ZW1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5ld0l0ZW1XaW5kb3cpO1xyXG5cclxuLy8gRW5hYmxlIHZsaWRhdGlvbiB0byBmb3Jtc1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbm5ld0NhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJQcm9mZXNzaW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldCB1c2VyIGluZm8gZnJvbSBET01cclxuICAgKiBAcmV0dXJucyBhcyBhbiBvYmplY3RcclxuICAgKi9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7IHVzZXJOYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsIHVzZXJKb2I6IHRoaXMuX3VzZXJQcm9mZXNzaW9uRWxlbWVudC50ZXh0Q29udGVudCB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHN0cmluZ3MgdG8gdGhlIERPTVxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyTmFtZSBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlckpvYiBcclxuICAgKi9cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckpvYikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VySm9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBvcHVwU2VsZWN0b3IgIHNlbGVjdG9yIHRvIG1hbmlwdWxhdGUgbW9kYWwgd2luZG93XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3UG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3UG9wdXBEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBvcGVuIG1vZGFsIHdpbmRvdyBhbmQgZmlsbCBmaWVsZCB3aXRoIHByb3ZpZGVkIHN0cmluZ3NcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgbGluayB0byBpbWFnZSB0byBkaXNwbGF5XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbmFtZSBvZiB0aGUgaW1hZ2VcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGVzY3JpcHRpb24gZGVzY3JpcHRpb24gdG8gdGhlIGltYWdlXHJcbiAgICovXHJcbiAgb3BlbihzcmMsIG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3UG9wdXBJbWFnZS5zcmMgPSBzcmM7XHJcbiAgICB0aGlzLl9wcmV2aWV3UG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBpdGVtcyBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGl0ZW1zIGZvciBpbml0aWFsIHJlbmRlci4gQnkgZGVmYXVsdCBpcyBzZXQgdG8gbnVsbC5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJlciBoYW5kbGVyIHRvIHJlbmRlciBuZXcgaXRlbXNcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGFpbmVyU2VsZWN0b3Igc2VsZWN0b3IgdG8gcHJlcGVuZCBuZXcgaXRlbXNcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zID0gbnVsbCwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlcigpIHtcclxuICAgIGlmICh0aGlzLl9pdGVtcyAhPT0gbnVsbCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcclxuICAgICAgICAgIHRocm93IFwiaXRlbXMgdmFyaWFibGUgaXMgbm90IG9mIHR5cGUgQXJyYXlcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgYCR7ZXJyb3J9YDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQobmV3RWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJ0aGlzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9maWVsZFNlbGVjdG9yIiwiZmllbGRTZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9maWVsZHNldEVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJjYXJkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfY2FyZFNlbGVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiX2ltYWdlU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwiX2ltYWdlRGVzY3JpcHRpb25TZWxlY3RvciIsImltYWdlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9saWtlQnV0dG9uU2VsZWN0b3IiLCJsaWtlQnV0dG9uU2VsZWN0b3IiLCJfbGlrZUFjdGl2ZVNlbGVjdG9yIiwibGlrZUFjdGl2ZVNlbGVjdG9yIiwiX2RlbGV0ZUJ1dHRvblNlbGVjdG9yIiwiZGVsZXRlQnV0dG9uU2VsZWN0b3IiLCJfcHJldmlld1BvcHVwSW1hZ2VTZWxlY3RvciIsInByZXZpZXdQb3B1cEltYWdlU2VsZWN0b3IiLCJfcHJldmlld1BvcHVwRGVzY3JpcHRpb25TZWxlY3RvciIsInByZXZpZXdQb3B1cERlc2NyaXB0aW9uU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJoYW5kbGVDYXJkSW1hZ2VDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJfZ2V0Q2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3BvcHVsYXRlQ2FyZEluZm8iLCJjYXJkVGl0bGVFbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfbGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsImdldENhcmQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInVzZXJJbnB1dE5hbWUiLCJ1c2VySW5wdXRQcm9mZXNzaW9uIiwiYWRkR2FsbGVyeUl0ZW1CdXR0b24iLCJwcmV2aWV3UG9wdXBTZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsIl9wb3B1cEFjdGl2ZVRvZ2dsZVNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVCYWNrZ3JvdW5kQ2xpY2tDbG9zZSIsImNsb3NlIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJrZXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZVN1Ym1pdEJ1dHRvbiIsIl9nZXRJbnB1dFZhbHVlcyIsIkFycmF5IiwiZnJvbSIsInJlZHVjZSIsImFjYyIsImlucHV0IiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsInJlc2V0IiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyUHJvZmVzc2lvbkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInNldFVzZXJJbmZvIiwicG9wdXBXaXRoSW1hZ2UiLCJfcHJldmlld1BvcHVwSW1hZ2UiLCJfcHJldmlld1BvcHVwRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsImNvbnN0YW50IiwicG9wdXBXaXRoRm9ybVByb2ZpbGUiLCJ1c2VySW5wdXQiLCJhYm91dCIsInBvcHVwV2l0aEZvcm1JbWFnZSIsIm5ld0l0ZW0iLCJuZXdJdGVtVGl0bGUiLCJuZXdJdGVtSW1hZ2VMaW5rIiwiY2FyZFJlbmRlcmVyIiwiYWRkSXRlbSIsImNhcmRDb25maWciLCJwcmV2aWV3UG9wdXBFbGVtZW50IiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkRm9ybVZhbGlkYXRvciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZXJyb3IiLCJUeXBlRXJyb3IiLCJuZXdFbGVtZW50IiwicHJlcGVuZCIsImNhcmRJdGVtIiwiaW5mbyJdLCJzb3VyY2VSb290IjoiIn0=