/*! For license information please see main.js.LICENSE.txt */
!function(){var e={232:function(e,t){var i,n;void 0===(n=this)&&void 0!==window&&(n=window),i=function(){return n.VerEx=(e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),t=function(t){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"","gm"));return e._prefixes="",e._source="",e._suffixes="",e._modifiers="gm",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),e(i,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._source+=e;var t=this._prefixes+this._source+this._suffixes;return this.compile(t,this._modifiers),this}},{key:"startOfLine",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._prefixes=e?"^":"",this.add()}},{key:"endOfLine",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._suffixes=e?"$":"",this.add()}},{key:"then",value:function(e){return e=i.sanitize(e),this.add("(?:"+e+")")}},{key:"find",value:function(e){return this.then(e)}},{key:"maybe",value:function(e){return e=i.sanitize(e),this.add("(?:"+e+")?")}},{key:"or",value:function(e){return this._prefixes+="(?:",this._suffixes=")"+this._suffixes,this.add(")|(?:"),e&&this.then(e),this}},{key:"anything",value:function(){return this.add("(?:.*)")}},{key:"anythingBut",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("(?:[^"+e+"]*)")}},{key:"something",value:function(){return this.add("(?:.+)")}},{key:"somethingBut",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("(?:[^"+e+"]+)")}},{key:"anyOf",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("["+e+"]")}},{key:"any",value:function(e){return this.anyOf(e)}},{key:"not",value:function(e){return e=i.sanitize(e),this.add("(?!"+e+")"),this}},{key:"range",value:function(){for(var e="",t=1;t<arguments.length;t+=2)e+=i.sanitize(arguments.length<=t-1?void 0:arguments[t-1])+"-"+i.sanitize(arguments.length<=t?void 0:arguments[t]);return this.add("["+e+"]")}},{key:"lineBreak",value:function(){return this.add("(?:\\r\\n|\\r|\\n)")}},{key:"br",value:function(){return this.lineBreak()}},{key:"tab",value:function(){return this.add("\\t")}},{key:"word",value:function(){return this.add("\\w+")}},{key:"digit",value:function(){return this.add("\\d")}},{key:"whitespace",value:function(){return this.add("\\s")}},{key:"addModifier",value:function(e){return this._modifiers.includes(e)||(this._modifiers+=e),this.add()}},{key:"removeModifier",value:function(e){return this._modifiers=this._modifiers.replace(e,""),this.add()}},{key:"withAnyCase",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.removeModifier("i"):this.addModifier("i")}},{key:"stopAtFirst",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.addModifier("g"):this.removeModifier("g")}},{key:"searchOneLine",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.addModifier("m"):this.removeModifier("m")}},{key:"repeatPrevious",value:function(){for(var e=/\d+/,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter((function(t){return e.test(t)}));return 0===r.length||r.length>2||this.add("{"+r.join(",")+"}"),this}},{key:"oneOrMore",value:function(){return this.add("+")}},{key:"multiple",value:function(e,t,n){return void 0!==e&&(e=i.sanitize(e),this.add("(?:"+e+")")),void 0===t&&void 0===n?this.add("*"):void 0!==t&&void 0===n?this.add("{"+t+",}"):void 0!==t&&void 0!==n&&this.add("{"+t+","+n+"}"),this}},{key:"beginCapture",value:function(){return this._suffixes+=")",this.add("(")}},{key:"endCapture",value:function(){return this._suffixes=this._suffixes.slice(0,-1),this.add(")")}},{key:"replace",value:function(e,t){return(e=e.toString()).replace(this,t)}},{key:"toRegExp",value:function(){var e=this.toString().match(/\/(.*)\/([gimuy]+)?/),t=e[1],i=e[2];return new RegExp(t,i)}}],[{key:"sanitize",value:function(e){return e instanceof RegExp?e.source:"number"==typeof e?e:"string"!=typeof e?"":e.replace(/([\].|*?+(){}^$\\:=[])/g,"\\$&")}}]),i}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(RegExp)),function(){var e=new t;return e.sanitize=t.sanitize,e});var e,t}.apply(t,[]),void 0===i||(e.exports=i)}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}!function(){"use strict";class e{constructor(e,t){this._inputSelector=t.inputSelector,this._errorClass=t.errorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._submitButtonSelector=t.submitButtonSelector,this._fieldSelector=t.fieldSelector,this._formElement=e,this._fieldsetElement=this._formElement.querySelector(this._fieldSelector),this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const i=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),i.textContent=t,i.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,i){this._name=e.name,this._link=e.link,this._alt=void 0!==e.alt?e.alt:e.name,this._cardId=e._id,this._likes=e.likes,this._userId=i,this._ownerId=e.owner._id,this._cardTemplate=document.querySelector(t)}isLiked(){return this._likes.find((e=>e._id===this._userId))}toggleLikeButton(){this._likeButton.classList.toggle("gallery-list__like-button-active")}isOwner(){return this._ownerId===this._userId}setLikes(e){this._likes=e,this._likesCounterElement.textContent=this._likes.length}setEventListeners(e){this._likeButton.addEventListener("click",(()=>{e.handleLikeButtonClick()})),this._cardImageElement.addEventListener("click",(()=>{e.handleCardImageClick()})),this.isOwner()&&this._deleteCardButton.addEventListener("click",(()=>{e.handleDeleteButtonClick(this)}))}_getCardElement(){const e=this._cardTemplate.content.querySelector("#template__card").cloneNode(!0);return this.isOwner()||e.querySelector("#template__delete-button").remove(),e}getCardId(){return this._cardId}_populateCardInfo(){const e=this._cardElement.querySelector("#template__image-description");this._cardImageElement=this._cardElement.querySelector("#template__image"),e.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._alt}removeCard(){this._cardElement.remove(),this._cardElement=null}createCard(){this._cardElement=this._getCardElement(),this._populateCardInfo(),this._likeButton=this._cardElement.querySelector("#template__like-button"),this._deleteCardButton=this._cardElement.querySelector("#template__delete-button"),this._likesCounterElement=this._cardElement.querySelector("#template__like-counter")}getCard(){return this._cardElement}}const n=document.querySelector(".profile__button-edit"),r=".profile__avatar",s=document.querySelector(".profile__button-add-contetnt"),o=document.querySelector(".popup_type_loading");class a{constructor(e){this._popupElement=document.querySelector(e),this._popupCloseButton=this._popupElement.querySelector(".popup__close-button"),this._popupActiveToggleSelector="popup_active",this._handleEscClose=this._handleEscClose.bind(this),this._handleBackgroundClickClose=this._handleBackgroundClickClose.bind(this),this.close=this.close.bind(this)}open(){this._popupElement.classList.add(this._popupActiveToggleSelector),this.setEventListeners()}close(){this.removeEventListeners(),this._popupElement.classList.remove(this._popupActiveToggleSelector)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleBackgroundClickClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._popupCloseButton.addEventListener("click",this.close),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleBackgroundClickClose)}removeEventListeners(){this._popupCloseButton.removeEventListener("click",this.close),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleBackgroundClickClose)}}class l extends a{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".form"),this._submitBtn=this._form.querySelector('button[type="submit"]'),this._submitBtnText=this._submitBtn.textContent,this._inputList=this._popupElement.querySelectorAll("input")}getInputValues(){return Array.from(this._inputList).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}changeSubmitHandler(e){this._handleFormSubmit=e}disableSbmitBtn(e){this._submitBtn.disabled=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._handleFormSubmit)}removeEventListeners(){super.removeEventListeners(),this._form.removeEventListener("submit",this._handleFormSubmit)}close(){super.close(),this._form.reset()}}i(232);const u=new class{constructor(e){let{url:t,headers:i}=e;this._url=t,this._headers=i}_checkResponse(e){return e.ok?e.json():Promise.reject(e.StatusText)}getUserInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/users/me";return fetch(this._url+e,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}editProfile(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/users/me";return fetch(this._url+i,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkResponse(e)))}editAvatar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/users/me/avatar";return fetch(this._url+t,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}getInitCard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/cards";return fetch(this._url+e,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}addCard(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/cards";return fetch(this._url+i,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkResponse(e)))}deleteCard(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/";return fetch(this._url+t+e,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}removeLike(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/likes/";return fetch(this._url+t+e,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}addLike(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/likes/";return fetch(this._url+t+e,{method:"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}}({url:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"2a676dbc-bb82-4a21-8adc-a0cd2428ca04","Content-Type":"application/json"}});let d;Promise.all([u.getUserInfo(),u.getInitCard()]).then((e=>{let[t,i]=e;d=t._id,f.setUserInfo(t.name,t.about),f.setUserAvatar(t.avatar),m.renderItems(i)})).catch((e=>{c(),console.log(e)})).finally((()=>{o.classList.remove("popup_active")}));const c=()=>{f.setUserInfo("Jacques Cousteau","Explorer"),f.setUserAvatar("../images/profile_avatar.png")},h=e=>{E.changeSubmitHandler((t=>{E.disableSbmitBtn(!0),t.preventDefault(),u.deleteCard(e.getCardId()).then((()=>{e.removeCard(),E.close()})).catch(console.log).finally((()=>{E.disableSbmitBtn(!1)}))})),E.open()},_={};var p;p={formSelector:".form",inputSelector:".form__input",errorClass:"form__input-error_active",inactiveButtonClass:"form__submit-button-inactive",inputErrorClass:"form__input_type_error",submitButtonSelector:".form__submit-button",fieldSelector:".form__set"},[...document.querySelectorAll(p.formSelector)].forEach((t=>{const i=new e(t,p),n=t.getAttribute("name");_[n]=i,i.enableValidation()}));const m=new class{constructor(e,t){let{renderer:i}=e;this._renderer=i,this._container=document.querySelector(t)}renderItems(e){Object.keys(e).reverse().forEach((t=>{this.addItem(e[t])}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({renderer:e=>{const i=new t(e,"#gallary-list__item__template",d);return i.createCard(),i.setLikes(e.likes),i.isLiked()&&i.toggleLikeButton(),i.setEventListeners({handleLikeButtonClick:()=>{!function(e){e.isLiked()?u.removeLike(e.getCardId()).then((t=>{e.setLikes(t.likes),e.toggleLikeButton()})).catch(console.log):u.addLike(e.getCardId()).then((t=>{e.setLikes(t.likes),e.toggleLikeButton()})).catch(console.log)}(i)},handleDeleteButtonClick:()=>{h(i)},handleCardImageClick:()=>v.open(e.link,e.name,e.name)}),i.getCard()}},".gallery-list"),f=new class{constructor(e,t,i){this._userNameElement=document.querySelector(e),this._userProfessionElement=document.querySelector(t),this._userAvatar=document.querySelector(i)}getUserInfo(){return{name:this._userNameElement.textContent,about:this._userProfessionElement.textContent,avatar:this._userAvatar.style.backgroundImage}}setUserInfo(e,t){this._userNameElement.textContent=e,this._userProfessionElement.textContent=t}setUserAvatar(e){this._userAvatar.style.backgroundImage="url(".concat(e,")")}}(".profile__name",".profile__profession",r),v=new class extends a{constructor(e){super(e),this._previewPopupImage=document.querySelector(".popup__preview-image"),this._previewPopupDescription=document.querySelector(".popup__description")}open(e,t,i){this._previewPopupImage.src=e,this._previewPopupImage.alt=t,this._previewPopupDescription.textContent=i,super.open()}}(".popup_type_preview"),g=new l(".popup_type_profile",(e=>{g.disableSbmitBtn(!0),e.preventDefault();const t=g.getInputValues();g.renderLoading(!0),u.editProfile(t.name,t.about).then((e=>{f.setUserInfo(e.name,e.about),g.close()})).catch((e=>{console.log(e)})).finally((()=>{g.renderLoading(!1),g.disableSbmitBtn(!1)}))})),y=new l(".popup_type_new-gallery-item",(e=>{y.disableSbmitBtn(!0),e.preventDefault();const t=y.getInputValues();y.renderLoading(!0),u.addCard(t.newItemTitle,t.newItemImageLink).then((e=>{m.addItem(e),y.close()})).catch(console.log).finally((()=>{y.renderLoading(!1),y.disableSbmitBtn(!1)}))})),k=new l(".popup_type_change-avatar",(e=>{k.disableSbmitBtn(!0),e.preventDefault();const t=k.getInputValues();k.renderLoading(!0),u.editAvatar(t.avatar).then((e=>{f.setUserAvatar(e.avatar),k.close()})).catch(console.log).finally((()=>{k.renderLoading(!1),k.disableSbmitBtn(!1)}))})),E=new l(".popup_type_delete-card",h);n.addEventListener("click",(()=>{g.setInputValues(f.getUserInfo()),_.profileEditForm.resetValidation(),g.open()})),s.addEventListener("click",(()=>{_.newGalleryItemForm.resetValidation(),y.open()})),document.querySelector(r).addEventListener("click",(()=>{_.changeAvatarForm.resetValidation(),k.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGZpbGUgVmVyYmFsRXhwcmVzc2lvbnMgSmF2YVNjcmlwdCBMaWJyYXJ5XHJcbiAqIEB2ZXJzaW9uIDAuMy4wXHJcbiAqIEBsaWNlbnNlIE1JVFxyXG4gKlxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9WZXJiYWxFeHByZXNzaW9ucy9KU1ZlcmJhbEV4cHJlc3Npb25zXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIERlZmluZSB0aGUgVmVyYmFsRXhwcmVzc2lvbiBjbGFzc1xyXG4gKlxyXG4gKiBAY2xhc3MgVmVyYmFsRXhwcmVzc2lvblxyXG4gKiBAZXh0ZW5kcyB7UmVnRXhwfVxyXG4gKi9cclxuY2xhc3MgVmVyYmFsRXhwcmVzc2lvbiBleHRlbmRzIFJlZ0V4cCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvbi5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQGFsaWFzIFZlckV4XHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBDYWxsIHRoZSBgUmVnRXhwYCBjb25zdHJ1Y3RvciBzbyB0aGF0IGB0aGlzYCBjYW4gYmUgdXNlZFxyXG4gICAgICAgIHN1cGVyKCcnLCAnZ20nKTtcclxuXHJcbiAgICAgICAgLy8gVmFyaWFibGVzIHRvIGhvbGQgdGhlIGV4cHJlc3Npb24gY29uc3RydWN0aW9uIGluIG9yZGVyXHJcbiAgICAgICAgdGhpcy5fcHJlZml4ZXMgPSAnJztcclxuICAgICAgICB0aGlzLl9zb3VyY2UgPSAnJztcclxuICAgICAgICB0aGlzLl9zdWZmaXhlcyA9ICcnO1xyXG4gICAgICAgIHRoaXMuX21vZGlmaWVycyA9ICdnbSc7IC8vICdnbG9iYWwsIG11bHRpbGluZScgbWF0Y2hpbmcgYnkgZGVmYXVsdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIFV0aWxpdHkgLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVzY2FwZSBtZXRhLWNoYXJhY3RlcnMgaW4gdGhlIHBhcmFtZXRlciBhbmQgbWFrZSBpdCBzYWZlIGZvciBhZGRpbmcgdG8gdGhlIGV4cHJlc3Npb25cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtYmVyKX0gdmFsdWUgb2JqZWN0IHRvIHNhbml0aXplXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzYW5pdGl6ZWQgdmFsdWVcclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzYW5pdGl6ZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc291cmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIG1ldGEgY2hhcmFjdGVyc1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL3JlZ2V4cFxyXG4gICAgICAgIGNvbnN0IHRvRXNjYXBlID0gLyhbXFxdLnwqPysoKXt9XiRcXFxcOj1bXSkvZztcclxuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUmVnRXhwL2xhc3RNYXRjaFxyXG4gICAgICAgIGNvbnN0IGxhc3RNYXRjaCA9ICckJic7XHJcblxyXG4gICAgICAgIC8vIEVzY2FwZSBtZXRhIGNoYXJhY3RlcnNcclxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSh0b0VzY2FwZSwgYFxcXFwke2xhc3RNYXRjaH1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBzdHVmZiB0byB0aGUgZXhwcmVzc2lvbiBhbmQgY29tcGlsZSB0aGUgbmV3IGV4cHJlc3Npb24gc28gaXQncyByZWFkeSB0byBiZSB1c2VkLlxyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcil9IFt2YWx1ZT0nJ10gc3R1ZmYgdG8gYWRkXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhZGQodmFsdWUgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX3NvdXJjZSArPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5fcHJlZml4ZXMgKyB0aGlzLl9zb3VyY2UgKyB0aGlzLl9zdWZmaXhlcztcclxuXHJcbiAgICAgICAgdGhpcy5jb21waWxlKHBhdHRlcm4sIHRoaXMuX21vZGlmaWVycyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJ1bGVzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIHN0YXJ0LW9mLWxpbmUgbWF0Y2hpbmdcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc3RhcnRPZkxpbmUoZW5hYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX3ByZWZpeGVzID0gZW5hYmxlID8gJ14nIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIGVuZC1vZi1saW5lIG1hdGNoaW5nXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbmFibGU9dHJ1ZV0gd2hldGhlciB0byBlbmFibGUgdGhpcyBiZWhhdmlvdXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGVuZE9mTGluZShlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgPSBlbmFibGUgPyAnJCcgOiAnJztcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2sgZm9yIHRoZSB2YWx1ZSBwYXNzZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtYmVyKX0gdmFsdWUgdmFsdWUgdG8gZmluZFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgdGhlbih2YWx1ZSkge1xyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGAoPzoke3ZhbHVlfSlgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsaWFzIGZvciB0aGVuKCkgdG8gYWxsb3cgZm9yIHJlYWRhYmxlIHN5bnRheCB3aGVuIHRoZW4oKSBpcyB0aGUgZmlyc3QgbWV0aG9kIGluIHRoZSBjaGFpbi5cclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtZXIpfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBmaW5kKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb3B0aW9uYWwgdmFsdWVzXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfG51bWJlcil9IHZhbHVlIHZhbHVlIHRvIGZpbmRcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG1heWJlKHZhbHVlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoYCg/OiR7dmFsdWV9KT9gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbHRlcm5hdGl2ZSBleHByZXNzaW9uc1xyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxudW1iZXIpfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBvcih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3ByZWZpeGVzICs9ICcoPzonO1xyXG4gICAgICAgIHRoaXMuX3N1ZmZpeGVzID0gYCkke3RoaXMuX3N1ZmZpeGVzfWA7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkKCcpfCg/OicpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGVuKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55IGNoYXJhY3RlciBhbnkgbnVtYmVyIG9mIHRpbWVzXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhbnl0aGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/Oi4qKScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55dGhpbmcgYnV0IHRoZXNlIGNoYXJhY3RlcnNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8c3RyaW5nW118bnVtYmVyW10pfSB2YWx1ZSBjaGFyYWN0ZXJzIHRvIG5vdCBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYW55dGhpbmdCdXQodmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGAoPzpbXiR7dmFsdWV9XSopYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbnkgY2hhcmFjdGVyKHMpIGF0IGxlYXN0IG9uY2VcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHNvbWV0aGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/Oi4rKScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55IGNoYXJhY3RlciBhdCBsZWFzdCBvbmUgdGltZSBleGNlcHQgZm9yIHRoZXNlIGNoYXJhY3RlcnNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8c3RyaW5nW118bnVtYmVyW10pfSB2YWx1ZSBjaGFyYWN0ZXJzIHRvIG5vdCBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc29tZXRoaW5nQnV0KHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuam9pbignJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YWx1ZSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZChgKD86W14ke3ZhbHVlfV0rKWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2ggYW55IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXJzXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyfHN0cmluZ1tdfG51bWJlcltdKX0gdmFsdWUgY2hhcmFjdGVycyB0byBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYW55T2YodmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGBbJHt2YWx1ZX1dYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG9ydGhhbmQgZm9yIGFueU9mKHZhbHVlKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhbnkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbnlPZih2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGUgcGFyYW1ldGVyIGRvZXMgbm90IGZvbGxvd1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2YWx1ZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgbm90KHZhbHVlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmFkZChgKD8hJHt2YWx1ZX0pYCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2hpbmcgYW55IGNoYXJhY3RlciB3aXRoaW4gYSByYW5nZSBvZiBjaGFyYWN0ZXJzXHJcbiAgICAgKiBVc2FnZTogLnJhbmdlKCBmcm9tLCB0byBbLCBmcm9tLCB0byAuLi4gXSApXHJcbiAgICAgKiBAcGFyYW0gey4uLnN0cmluZ30gcmFuZ2VzIGNoYXJhY3RlcnMgZGVub3RpbmcgYmVnaW5uaW5nIGFuZCBlbmRpbmcgb2YgcmFuZ2VzXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICByYW5nZSguLi5yYW5nZXMpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgY29uc3QgZnJvbSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUocmFuZ2VzW2kgLSAxXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZShyYW5nZXNbaV0pO1xyXG5cclxuICAgICAgICAgICAgdmFsdWUgKz0gYCR7ZnJvbX0tJHt0b31gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGBbJHt2YWx1ZX1dYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3BlY2lhbCBjaGFyYWN0ZXJzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIExpbmUgYnJlYWtcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGxpbmVCcmVhaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/OlxcXFxyXFxcXG58XFxcXHJ8XFxcXG4pJyk7IC8vIFVuaXgoTEYpICsgV2luZG93cyhDUkxGKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBzaG9ydGhhbmQgZm9yIGxpbmVCcmVhaygpIGZvciBodG1sLW1pbmRlZCB1c2Vyc1xyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYnIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUJyZWFrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIHRhYiBjaGFyYWN0ZXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHRhYigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJ1xcXFx0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhbnkgYWxwaGFudW1lcmljXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICB3b3JkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgnXFxcXHcrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIHNpbmdsZSBkaWdpdFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgZGlnaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCdcXFxcZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2ggYSBzaW5nbGUgd2hpdGVzcGFjZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgd2hpdGVzcGFjZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJ1xcXFxzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW9kaWZpZXJzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSByZWdleCBtb2RpZmllci9mbGFnXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kaWZpZXIgbW9kaWZpZXIgdG8gYWRkXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhZGRNb2RpZmllcihtb2RpZmllcikge1xyXG4gICAgICAgIGlmICghdGhpcy5fbW9kaWZpZXJzLmluY2x1ZGVzKG1vZGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9tb2RpZmllcnMgKz0gbW9kaWZpZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBtb2RpZmllclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGlmaWVyIG1vZGlmaWVyIHRvIHJlbW92ZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTW9kaWZpZXIobW9kaWZpZXIpIHtcclxuICAgICAgICB0aGlzLl9tb2RpZmllcnMgPSB0aGlzLl9tb2RpZmllcnMucmVwbGFjZShtb2RpZmllciwgJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udHJvbCBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbmFibGU9dHJ1ZV0gd2hldGhlciB0byBlbmFibGUgdGhpcyBiZWhhdmlvdXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHdpdGhBbnlDYXNlKGVuYWJsZSA9IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlID8gdGhpcy5hZGRNb2RpZmllcignaScpIDogdGhpcy5yZW1vdmVNb2RpZmllcignaScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmYXVsdCBiZWhhdmlvdXIgaXMgd2l0aCBcImdcIiBtb2RpZmllciwgc28gd2UgY2FuIHR1cm4gdGhpcyBhbm90aGVyIHdheSBhcm91bmQgdGhhbiBvdGhlciBtb2RpZmllcnNcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc3RvcEF0Rmlyc3QoZW5hYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGUgPyB0aGlzLnJlbW92ZU1vZGlmaWVyKCdnJykgOiB0aGlzLmFkZE1vZGlmaWVyKCdnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIHRoZSBtdWx0aWxpbmUgbW9kaWZpZXJcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc2VhcmNoT25lTGluZShlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuYWJsZSA/IHRoaXMucmVtb3ZlTW9kaWZpZXIoJ20nKSA6IHRoaXMuYWRkTW9kaWZpZXIoJ20nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wcyAvL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwZWF0IHRoZSBwcmV2aW91cyBpdGVtIGV4YWN0bHkgbiB0aW1lcyBvciBiZXR3ZWVuIG4gYW5kIG0gdGltZXNcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHJlcGVhdFByZXZpb3VzKC4uLnF1YW50aXR5KSB7XHJcbiAgICAgICAgY29uc3QgaXNJbnRlZ2VyID0gL1xcZCsvO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHF1YW50aXR5LmZpbHRlcihhcmd1bWVudCA9PiBpc0ludGVnZXIudGVzdChhcmd1bWVudCkpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCB8fCB2YWx1ZXMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWRkKGB7JHt2YWx1ZXMuam9pbignLCcpfX1gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXBlYXQgdGhlIHByZXZpb3VzIGF0IGxlYXN0IG9uY2VcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG9uZU9yTW9yZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJysnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGNoIHRoZSB2YWx1ZSB6ZXJvIG9yIG1vcmUgdGltZXNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcGFyYW0ge2ludGVnZXJ9IFtsb3dlcl0gbWluaW11bSBudW1iZXIgb2YgdGltZXMgdGhlIHZhbHVlIHNob3VsZCBiZSByZXBlYXRlZFxyXG4gICAgICogQHBhcmFtIHtpbnRlZ2VyfSBbdXBwZXJdIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSB2YWx1ZSBzaG91bGQgYmUgcmVwZWF0ZWRcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG11bHRpcGxlKHZhbHVlLCBsb3dlciwgdXBwZXIpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgKD86JHt2YWx1ZX0pYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobG93ZXIgPT09IHVuZGVmaW5lZCAmJiB1cHBlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkKCcqJyk7IC8vIEFueSBudW1iZXIgb2YgdGltZXNcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQgJiYgdXBwZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgeyR7bG93ZXJ9LH1gKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQgJiYgdXBwZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgeyR7bG93ZXJ9LCR7dXBwZXJ9fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FwdHVyZSBncm91cHMgLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBhIGNhcHR1cmluZyBncm91cFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYmVnaW5DYXB0dXJlKCkge1xyXG4gICAgICAgIC8vIEFkZCB0aGUgZW5kIG9mIHRoZSBjYXB0dXJlIGdyb3VwIHRvIHRoZSBzdWZmaXhlcyB0ZW1wb3JhcmlseSBzbyB0aGF0IGNvbXBpbGF0aW9uIGNvbnRpbnVlcyB0byB3b3JrXHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgKz0gJyknO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgnKCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5kcyBhIGNhcHR1cmluZyBncm91cFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgZW5kQ2FwdHVyZSgpIHtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIGxhc3QgcGFyZW50aGVzaXMgZnJvbSB0aGUgX3N1ZmZpeGVzIGFuZCBhZGQgaXQgdG8gdGhlIHJlZ2V4XHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgPSB0aGlzLl9zdWZmaXhlcy5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCcpJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzY2VsbGFuZW91cyAvL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnRoYW5kIGZ1bmN0aW9uIGZvciB0aGUgc3RyaW5nLnJlcGxhY2UgZnVuY3Rpb24gdG8gYWxsb3cgZm9yIGEgbW9yZSBsb2dpY2FsIGZsb3dcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2Ugc3RyaW5nIHRvIHNlYXJjaCBmb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSB0byByZXBsYWNlIHdpdGhcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHJlcGxhY2Uoc291cmNlLCB2YWx1ZSkge1xyXG4gICAgICAgIHNvdXJjZSA9IHNvdXJjZS50b1N0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBzb3VyY2UucmVwbGFjZSh0aGlzLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IHRvIFJlZ0V4cCBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtSZWdFeHB9IGVxdWl2YWxlbnQgUmVnRXhwIGluc3RhbmNlXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICB0b1JlZ0V4cCgpIHtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy50b1N0cmluZygpLm1hdGNoKC9cXC8oLiopXFwvKFtnaW11eV0rKT8vKTtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gY29tcG9uZW50c1sxXTtcclxuICAgICAgICBjb25zdCBmbGFncyA9IGNvbXBvbmVudHNbMl07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBgVmVyYmFsRXhwcmVzc2lvbmBcclxuICogQGV4cG9ydFxyXG4gKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gbmV3IGluc3RhbmNlXHJcbiAqL1xyXG5mdW5jdGlvbiBWZXJFeCgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVmVyYmFsRXhwcmVzc2lvbigpO1xyXG4gICAgaW5zdGFuY2Uuc2FuaXRpemUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIGNvbmZpZykge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZmllbGRTZWxlY3RvciA9IGNvbmZpZy5maWVsZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9maWVsZHNldEVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9maWVsZFNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCB1c2VySWQpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fYWx0ID0gZGF0YS5hbHQgIT09IHVuZGVmaW5lZCA/IGRhdGEuYWx0IDogZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcblxyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFRlbXBsYXRlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhbFxyXG4gIC8vXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5maW5kKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlrZXNcclxuICAvL1xyXG4gIHRvZ2dsZUxpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJnYWxsZXJ5LWxpc3RfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGlzT3duZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxuICBzZXRMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyhjYWxsYmFja3MpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgY2FsbGJhY2tzLmhhbmRsZUxpa2VCdXR0b25DbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGNhbGxiYWNrcy5oYW5kbGVDYXJkSW1hZ2VDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5pc093bmVyKCkpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrcy5oYW5kbGVEZWxldGVCdXR0b25DbGljayh0aGlzKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkIEVsZW1lbnRcclxuICAvL1xyXG4gIC8qKlxyXG4gICAqICBDbG9uZXMgdGVtcGxhdGUgZWxlbWVudCBhbmQgcmVtb3ZlIGRlbGV0ZSBidXR0b24gaWYgY2FyZCB3YSBjcmVhdGVkIG5vdCBieSB1c2VyXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBjYXJkIHRlbXBsYXRlIGVsZW1lbnRcclxuICAgKi9cclxuICBfZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiN0ZW1wbGF0ZV9fY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgaWYgKCF0aGlzLmlzT3duZXIoKSkge1xyXG4gICAgICBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIiN0ZW1wbGF0ZV9fZGVsZXRlLWJ1dHRvblwiKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZElkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmlsbCB1cCBlbGVtZW50IHdpdGggZGF0YXtuYW1lLCBsaW5rLCBhbHQgZGVzY3JpcHRpb259XHJcbiAgICovXHJcbiAgX3BvcHVsYXRlQ2FyZEluZm8oKSB7XHJcbiAgICBjb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjdGVtcGxhdGVfX2ltYWdlLWRlc2NyaXB0aW9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID1cclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZW1wbGF0ZV9faW1hZ2VcIik7XHJcbiAgICBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fYWx0O1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcmV0dXJuIGFuIGNhcmQgZWxlbWVudCBmaWlsZWQgdXAgd2l0aCBkYXRhXHJcbiAgICovXHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldENhcmRFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9wb3B1bGF0ZUNhcmRJbmZvKCk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI3RlbXBsYXRlX19saWtlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI3RlbXBsYXRlX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlc0NvdW50ZXJFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjdGVtcGxhdGVfX2xpa2UtY291bnRlclwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiLy9jcmVkZW50aWFsc3MgdmFyaWFibGVzXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIlxyXG4pOyAvL1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX25hbWVcIjsgLy9cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQcm9mZXNzaW9uU2VsZWN0b3IgPSBcIi5wcm9maWxlX19wcm9mZXNzaW9uXCI7IC8vXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSBcIi5wcm9maWxlX19hdmF0YXJcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyQ2hhbmdlU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2NoYW5nZS1hdmF0YXJcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9wcm9maWxlXCI7IC8vXHJcblxyXG5leHBvcnQgY29uc3QgbmV3SXRlbUZvcm1TZWxlY3RvciA9IFwiLmZvcm1fdHlwZV9uZXctZ2FsbGVyeS1pdGVtXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybVNlbGVjdG9yID0gXCIuZm9ybV90eXBlX3Byb2ZpbGVcIjtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm1TZWxlY3RvciA9IFwiLmZvcm1fdHlwZV9jaGFuZ2UtYXZhdGFyXCI7XHJcblxyXG4vL05ld0NhcmQgdmFyaWFibGVzXHJcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2dhbGxhcnktbGlzdF9faXRlbV9fdGVtcGxhdGVcIjtcclxuZXhwb3J0IGNvbnN0IGFkZEdhbGxlcnlJdGVtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19idXR0b24tYWRkLWNvbnRldG50XCJcclxuKTsgLy9cclxuZXhwb3J0IGNvbnN0IGdhbGxlcnlJdGVtc0xpc3RTZWxlY3RvciA9IFwiLmdhbGxlcnktbGlzdFwiOyAvL1xyXG5leHBvcnQgY29uc3QgbmV3SXRlbVBvcHVwU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIjsgLy9cclxuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkXCI7XHJcblxyXG4vL1ByZXdpZXYgdmFyaWFibGVcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdQb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9wcmV2aWV3XCI7XHJcblxyXG4vL2xvYWRpbmcgYW5pbWF0aW9uXHJcbmV4cG9ydCBjb25zdCBsb2FkaW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfbG9hZGluZ1wiKTtcclxuXHJcbi8vY29uZmlnc1xyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbi1pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBmaWVsZFNlbGVjdG9yOiBcIi5mb3JtX19zZXRcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBvcHVwU2VsZWN0b3Igc2VsZWN0b3IgdG8gbWFuaXB1bGF0ZSBtb2RhbCB3aW5kb3dcclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwQWN0aXZlVG9nZ2xlU2VsZWN0b3IgPSBcInBvcHVwX2FjdGl2ZVwiO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlID1cclxuICAgICAgdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBhZGQgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyB0byBtb2RhbCB3aW5kb3cgdGFnIHRvIHJpc2UgaXQgdXBcclxuICAgKi9cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBoYW5kbGUgY2xvc2UgbW9kYWwgd2luZG93IHdoZW4gRXNjYXBlIGlzIGRvd25cclxuICAgKi9cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlzS2V5RG93bkVzYyA9IGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIjtcclxuICAgIGlmIChpc0tleURvd25Fc2MpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogaGFuZGxlIGNsb3NlIG1vZGFsIHdpbmRvdyB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBfaGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2V0IGV2ZW50IGxpc3RlbmVycyB0byBjbG9zZSBidXR0b24gY2xpY2ssIGNsb3NlIG9uIEVzYyBkb3duIGFuZCB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnNcclxuICAgKi9cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9wdXBTZWxlY3RvciBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUZvcm1TdWJtaXQgYSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBQb3B1cFdpdGhGb3JtIGNhbGxzIHdoZW4gdGhlIGZvcm3igJlzIHN1Ym1pdCBldmVudCBmaXJlc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gIH1cclxuICAvKipcclxuICAgKmNvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmRcclxuICAgKiBAcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBkYXRhLlxyXG4gICAqXHJcbiAgICovXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnJlZHVjZShcclxuICAgICAgKGFjYywgaW5wdXQpID0+ICh7IC4uLmFjYywgW2lucHV0Lm5hbWVdOiBpbnB1dC52YWx1ZSB9KSxcclxuICAgICAge31cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBpc0xvYWRpbmcgPyBsb2FkaW5nVGV4dCA6IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VTdWJtaXRIYW5kbGVyKG5ld0hhbmRsZXIpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBuZXdIYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVNibWl0QnRuKGlzRGlzYWJsZWQpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVzZXQgZm9ybSBpbnB1dCBmaWVsZHNcclxuICAgKi9cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWZXJFeCBmcm9tIFwidmVyYmFsLWV4cHJlc3Npb25zXCI7XHJcblxyXG5jbGFzcyBBcGkge1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgQVBJIHdhcyBkZXNpZ24gdG8gd29yayB3aXRoIHJlbW90ZSBwcm9qZWN0IFwiQXJvdW5kIHRoZSBVLlMuXCIuXHJcbiAgICogQWxsIGZ1bmN0aW9uYWxpdHkgaXMgYmFzZWQgb24gY2FwYWJpbGl0aWVzIG9mIHJlbW90ZSBzZXJ2ZXIuXHJcbiAgICogVGhlIEFQSSBpcyBjYXBhYmxlIG9mIHJlY2lldmluZywgdXBkYXRpbmcsIGNyZWF0aW5nIGFuZCByZW1vdmluZyBkYXRhIGZyb20gcmVtb3RlIHNlcnZlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgYW4gdXJsIHRvIGNvbm5lY3QgdG8gcmVtb3RlIHNlcnZlclxyXG4gICAqIEBwYXJhbSB7SGVhZGVyc30gaGVhZGVycyBhbiBhdXRob3JpemF0aW9uIGhlYWRlciBmb3Igc2VuZGluZyByZXF1ZXN0cyB0byB0aGUgcmVtb3RlIHNlcnZlclxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHsgdXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gX2lzVXJsKHVybCkge1xyXG4gIC8vICAgY29uc3QgcmVnZXhwID0gVmVyRXgoKVxyXG4gIC8vICAgICAuc3RhcnRPZkxpbmUoKVxyXG4gIC8vICAgICAudGhlbihcImh0dHBcIilcclxuICAvLyAgICAgLm1heWJlKFwic1wiKVxyXG4gIC8vICAgICAudGhlbihcIjovL1wiKVxyXG4gIC8vICAgICAubWF5YmUoXCJ3d3cuXCIpXHJcbiAgLy8gICAgIC5hbnl0aGluZ0J1dChcIiBcIilcclxuICAvLyAgICAgLmVuZE9mTGluZSgpO1xyXG5cclxuICAvLyAgIGlmIChyZWdleHAudGVzdCh1cmwpKSB7XHJcbiAgLy8gICAgIHJldHVybiB1cmw7XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHJpbmcgaXMgbm90IGFuIFVSTFwiKTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2sgPyByZXNwb25zZS5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5TdGF0dXNUZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybFBhdGggcGF0aCB0byB1c2VyIGRhdGFcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBhbiBvYmplY3QgdGhhdCBjb250YWlucyB1c2VyIGluZm9cclxuICAgKi9cclxuICBnZXRVc2VySW5mbyh1cmxQYXRoID0gXCIvdXNlcnMvbWVcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGUobmFtZSwgYWJvdXQsIHVybFBhdGggPSBcIi91c2Vycy9tZVwiKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgdXJsUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGVkaXRBdmF0YXIoYXZhdGFyLCB1cmxQYXRoID0gXCIvdXNlcnMvbWUvYXZhdGFyXCIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyB1cmxQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0Q2FyZCh1cmxQYXRoID0gXCIvY2FyZHNcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChuYW1lLCBsaW5rLCB1cmxQYXRoID0gXCIvY2FyZHNcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkLCB1cmxQYXRoID0gXCIvY2FyZHMvXCIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyB1cmxQYXRoICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShpZCwgdXJsUGF0aCA9IFwiL2NhcmRzL2xpa2VzL1wiKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgdXJsUGF0aCArIGlkLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoaWQsIHVybFBhdGggPSBcIi9jYXJkcy9saWtlcy9cIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGggKyBpZCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgdXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjJhNjc2ZGJjLWJiODItNGEyMS04YWRjLWEwY2QyNDI4Y2EwNFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL3V0aWxzL2FwaS5qc1wiO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbi8vXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uc1xyXG4vL1xyXG5cclxuZnVuY3Rpb24gZGlzYWJsZUxvYWRpbmcoKSB7XHJcbiAgY29uc3RhbnQubG9hZGluZ1BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XHJcbn1cclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRDYXJkKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgY2FyZFJlbmRlcmVyLnJlbmRlckl0ZW1zKGNhcmRzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIHJlbmRlckRlZmF1bHRQYWdlKCk7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBkaXNhYmxlTG9hZGluZygpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgcmVuZGVyRGVmYXVsdFBhZ2UgPSAoKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oXCJKYWNxdWVzIENvdXN0ZWF1XCIsIFwiRXhwbG9yZXJcIik7XHJcbiAgdXNlckluZm8uc2V0VXNlckF2YXRhcihcIi4uL2ltYWdlcy9wcm9maWxlX2F2YXRhci5wbmdcIik7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVQcm9maWxlRWRpdFdpbmRvdyA9ICgpID0+IHtcclxuICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuXHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlRWRpdEZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4gIHBvcHVwV2l0aEZvcm1Qcm9maWxlLm9wZW4oKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VCdXR0b25DbGljayhjYXJkKSB7XHJcbiAgY2FyZC5pc0xpa2VkKClcclxuICAgID8gYXBpXHJcbiAgICAgICAgLnJlbW92ZUxpa2UoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2VCdXR0b24oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgIDogYXBpXHJcbiAgICAgICAgLmFkZExpa2UoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2VCdXR0b24oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZU5ld0l0ZW1XaW5kb3cgPSAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJuZXdHYWxsZXJ5SXRlbUZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBXaXRoRm9ybUltYWdlLm9wZW4oKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKGV2ZW50KSA9PiB7XHJcbiAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuZGlzYWJsZVNibWl0QnRuKHRydWUpO1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgdXNlcklucHV0ID0gcG9wdXBXaXRoRm9ybVByb2ZpbGUuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgcG9wdXBXaXRoRm9ybVByb2ZpbGUucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0UHJvZmlsZSh1c2VySW5wdXQubmFtZSwgdXNlcklucHV0LmFib3V0KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxuICAgICAgcG9wdXBXaXRoRm9ybVByb2ZpbGUuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1Qcm9maWxlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5kaXNhYmxlU2JtaXRCdG4oZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXQgPSAoZXZlbnQpID0+IHtcclxuICBwb3B1cFdpdGhBdmF0YXJGb3JtLmRpc2FibGVTYm1pdEJ0bih0cnVlKTtcclxuXHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCB1c2VySW5wdXQgPSBwb3B1cFdpdGhBdmF0YXJGb3JtLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gIHBvcHVwV2l0aEF2YXRhckZvcm0ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgYXBpXHJcbiAgICAuZWRpdEF2YXRhcih1c2VySW5wdXQuYXZhdGFyKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICBwb3B1cFdpdGhBdmF0YXJGb3JtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhBdmF0YXJGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBwb3B1cFdpdGhBdmF0YXJGb3JtLmRpc2FibGVTYm1pdEJ0bihmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZU5ld0l0ZW1TdWJtaXQgPSAoZXZlbnQpID0+IHtcclxuICBwb3B1cFdpdGhGb3JtSW1hZ2UuZGlzYWJsZVNibWl0QnRuKHRydWUpO1xyXG5cclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IHVzZXJJbnB1dCA9IHBvcHVwV2l0aEZvcm1JbWFnZS5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICBwb3B1cFdpdGhGb3JtSW1hZ2UucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh1c2VySW5wdXQubmV3SXRlbVRpdGxlLCB1c2VySW5wdXQubmV3SXRlbUltYWdlTGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZFJlbmRlcmVyLmFkZEl0ZW0ocmVzKTtcclxuICAgICAgcG9wdXBXaXRoRm9ybUltYWdlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhGb3JtSW1hZ2UucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1JbWFnZS5kaXNhYmxlU2JtaXRCdG4oZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVEZWxldGVCdXR0b25DbGljayA9IChjYXJkKSA9PiB7XHJcbiAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uY2hhbmdlU3VibWl0SGFuZGxlcigoZXZlbnQpID0+IHtcclxuICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmRpc2FibGVTYm1pdEJ0bih0cnVlKTtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmRpc2FibGVTYm1pdEJ0bihmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG4gIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLm9wZW4oKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVBdmF0cldpbmRvdyA9ICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImNoYW5nZUF2YXRhckZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBXaXRoQXZhdGFyRm9ybS5vcGVuKCk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNhcmRJdGVtIG9iamVjdCB0aGF0IGNvbnRhaW5zIG5hbWUgYW5kIGxpbmsgb2YgbmV3IGNhcmRcclxuICogQHJldHVybnMgYW4gY2FyZCBlbGVtZW50XHJcbiAqL1xyXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmRJdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmRJdGVtLCBjb25zdGFudC5jYXJkVGVtcGxhdGVTZWxlY3RvciwgdXNlcklkKTtcclxuICBjYXJkLmNyZWF0ZUNhcmQoKTtcclxuICBjYXJkLnNldExpa2VzKGNhcmRJdGVtLmxpa2VzKTtcclxuICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgIGNhcmQudG9nZ2xlTGlrZUJ1dHRvbigpO1xyXG4gIH1cclxuICBjYXJkLnNldEV2ZW50TGlzdGVuZXJzKHtcclxuICAgIGhhbmRsZUxpa2VCdXR0b25DbGljazogKCkgPT4ge1xyXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2soY2FyZCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s6ICgpID0+IHtcclxuICAgICAgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2soY2FyZCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlQ2FyZEltYWdlQ2xpY2s6ICgpID0+XHJcbiAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZEl0ZW0ubGluaywgY2FyZEl0ZW0ubmFtZSwgY2FyZEl0ZW0ubmFtZSksXHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0Q2FyZCgpO1xyXG59O1xyXG5cclxuLy9cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IGluc3RhbmNlc1xyXG4vL1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKV07XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCBjb25maWcpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uc3RhbnQuZm9ybVZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLy9jcmVhdGUgaW5zdGFuY2Ugb2YgY2FyZCByZW5kZXJlciB0byBhZGQgY2FyZCB0byB0aGUgcGFnZVxyXG5jb25zdCBjYXJkUmVuZGVyZXIgPSBuZXcgU2VjdGlvbihcclxuICB7IHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgY29uc3RhbnQuZ2FsbGVyeUl0ZW1zTGlzdFNlbGVjdG9yXHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICBjb25zdGFudC5wcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gIGNvbnN0YW50LnByb2ZpbGVQcm9mZXNzaW9uU2VsZWN0b3IsXHJcbiAgY29uc3RhbnQucHJvZmlsZUF2YXRhclNlbGVjdG9yXHJcbik7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGNvbnN0YW50LnByZXZpZXdQb3B1cFNlbGVjdG9yKTtcclxuY29uc3QgcG9wdXBXaXRoRm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjb25zdGFudC5wb3B1cFByb2ZpbGVTZWxlY3RvcixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5jb25zdCBwb3B1cFdpdGhGb3JtSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjb25zdGFudC5uZXdJdGVtUG9wdXBTZWxlY3RvcixcclxuICBoYW5kbGVOZXdJdGVtU3VibWl0XHJcbik7XHJcbmNvbnN0IHBvcHVwV2l0aEF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjb25zdGFudC5wb3B1cEF2YXRhckNoYW5nZVNlbGVjdG9yLFxyXG4gIGhhbmRsZUNoYW5nZUF2YXRhclN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBEZWxldGVDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBjb25zdGFudC5wb3B1cERlbGV0ZUNvbmZpcm1hdGlvblNlbGVjdG9yLFxyXG4gIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrXHJcbik7XHJcblxyXG4vL0FkZCBldmVudCBMaXN0ZW5lcnMgdG8gYnV0dG9uc1xyXG5jb25zdGFudC5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUHJvZmlsZUVkaXRXaW5kb3cpO1xyXG5jb25zdGFudC5hZGRHYWxsZXJ5SXRlbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmV3SXRlbVdpbmRvdyk7XHJcbmRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3IoY29uc3RhbnQucHJvZmlsZUF2YXRhclNlbGVjdG9yKVxyXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUHJvZmlsZUF2YXRyV2luZG93KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBpdGVtcyBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGl0ZW1zIGZvciBpbml0aWFsIHJlbmRlci4gQnkgZGVmYXVsdCBpcyBzZXQgdG8gbnVsbC5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJlciBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBmaXJlcyB3aGVuIG5ldyBpdGVtIG5lZWQgdG8gYmUgcmVuZGVyZWRcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGFpbmVyU2VsZWN0b3Igc2VsZWN0b3IgdG8gcHJlcGVuZCBuZXcgaXRlbXNcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRha2VzIGFuIG9iamVjdCBvZiBvYmplY3RzIGFuZCBhZGQgaXQgdG8gY29udGFpbmVyIGluIHJldmVyc2Ugb3JkZXJcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtcyBvYmplY3Qgb2Ygb2JqZWN0cyB0aGF0IGNvbmF0YWlucyBkYXRhIHRvIGFkZCBuZXcgY2FyZHNcclxuICAgKi9cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgY29uc3QgcmV2ZXJzZWRLZXlzID0gT2JqZWN0LmtleXMoaXRlbXMpLnJldmVyc2UoKTtcclxuICAgIHJldmVyc2VkS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW1zW2tleV0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIGFuIG9iamVjdFxyXG4gICAqL1xyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQobmV3RWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IsIHByb2ZpbGVBdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJQcm9mZXNzaW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBnZXQgdXNlciBpbmZvIGZyb20gRE9NXHJcbiAgICogQHJldHVybnMgYXMgYW4gb2JqZWN0XHJcbiAgICovXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyUHJvZmVzc2lvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHVzZXIncyBuYW1lLCBqb2IgZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyTmFtZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySm9iXHJcbiAgICovXHJcbiAgc2V0VXNlckluZm8odXNlck5hbWUsIHVzZXJKb2IpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlclByb2Zlc3Npb25FbGVtZW50LnRleHRDb250ZW50ID0gdXNlckpvYjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqICBTZXQgdXNlciBhdmF0YXIgaW1hZ2VcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bGlua30gYXZhdGFyXHJcbiAgICovXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2F2YXRhcn0pYDtcclxuICAgIC8vIHRoaXMuX3VzZXJBdmF0YXIuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImNvdmVyXCI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9wdXBTZWxlY3RvciAgc2VsZWN0b3IgdG8gbWFuaXB1bGF0ZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZGVzY3JpcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIG9wZW4gbW9kYWwgd2luZG93IGFuZCBmaWxsIGZpZWxkIHdpdGggcHJvdmlkZWQgc3RyaW5nc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNyYyBsaW5rIHRvIGltYWdlIHRvIGRpc3BsYXlcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBpbWFnZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkZXNjcmlwdGlvbiBkZXNjcmlwdGlvbiB0byB0aGUgaW1hZ2VcclxuICAgKi9cclxuICBvcGVuKHNyYywgbmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cEltYWdlLnNyYyA9IHNyYztcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3UG9wdXBEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX2luaGVyaXRzIiwiX3NvdXJjZSIsImtleSIsImVuYWJsZSIsIl9wcmVmaXhlcyIsInZhbHVlIiwiYWRkIiwiYXJndW1lbnRzIiwiVmVyYmFsRXhwcmVzc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsInNhbml0aXplIiwiYW55T2YiLCJfbW9kaWZpZXJzIiwiaW5jbHVkZXMiLCJhZGRNb2RpZmllciIsInJlbW92ZU1vZGlmaWVyIiwicXVhbnRpdHkiLCJ2YWx1ZXMiLCJ0aGlzIiwidXBwZXIiLCJzb3VyY2UiLCJ0b1N0cmluZyIsInNsaWNlIiwicmVwbGFjZSIsIlJlZ0V4cCIsImNvbXBvbmVudHMiLCJtYXRjaCIsImxhc3RNYXRjaCIsImNvbnN0cnVjdG9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiY29uZmlnIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2ZpZWxkU2VsZWN0b3IiLCJmaWVsZFNlbGVjdG9yIiwiX2Zvcm1FbGVtZW50IiwiX2ZpZWxkc2V0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJ0ZXh0Q29udGVudCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJkYXRhIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJ1c2VySWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfYWx0IiwiYWx0IiwiX2NhcmRJZCIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJpc0xpa2VkIiwiZmluZCIsInVzZXIiLCJ0b2dnbGVMaWtlQnV0dG9uIiwiX2xpa2VCdXR0b24iLCJ0b2dnbGUiLCJpc093bmVyIiwic2V0TGlrZXMiLCJfbGlrZXNDb3VudGVyRWxlbWVudCIsImxlbmd0aCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FsbGJhY2tzIiwiaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJoYW5kbGVDYXJkSW1hZ2VDbGljayIsIl9kZWxldGVDYXJkQnV0dG9uIiwiaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2siLCJfZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0Q2FyZElkIiwiX3BvcHVsYXRlQ2FyZEluZm8iLCJjYXJkVGl0bGVFbGVtZW50IiwiX2NhcmRFbGVtZW50Iiwic3JjIiwicmVtb3ZlQ2FyZCIsImNyZWF0ZUNhcmQiLCJnZXRDYXJkIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJhZGRHYWxsZXJ5SXRlbUJ1dHRvbiIsImxvYWRpbmdQb3B1cCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsIl9wb3B1cEFjdGl2ZVRvZ2dsZVNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVCYWNrZ3JvdW5kQ2xpY2tDbG9zZSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsImdldElucHV0VmFsdWVzIiwiZnJvbSIsInJlZHVjZSIsImFjYyIsImlucHV0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0Iiwic2V0SW5wdXRWYWx1ZXMiLCJjaGFuZ2VTdWJtaXRIYW5kbGVyIiwibmV3SGFuZGxlciIsImRpc2FibGVTYm1pdEJ0biIsImlzRGlzYWJsZWQiLCJyZXNldCIsImFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIlN0YXR1c1RleHQiLCJnZXRVc2VySW5mbyIsInVybFBhdGgiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJlZGl0UHJvZmlsZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0QXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdENhcmQiLCJhZGRDYXJkIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUxpa2UiLCJhZGRMaWtlIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImNhcmRSZW5kZXJlciIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnJvciIsInJlbmRlckRlZmF1bHRQYWdlIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJjb25zdGFudCIsImNhcmQiLCJwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbiIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwiT2JqZWN0Iiwia2V5cyIsInJldmVyc2UiLCJhZGRJdGVtIiwiaXRlbSIsIm5ld0VsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEl0ZW0iLCJwb3B1cFdpdGhJbWFnZSIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJQcm9mZXNzaW9uRWxlbWVudCIsIl91c2VyQXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfcHJldmlld1BvcHVwSW1hZ2UiLCJfcHJldmlld1BvcHVwRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInBvcHVwV2l0aEZvcm1Qcm9maWxlIiwidXNlcklucHV0IiwicG9wdXBXaXRoRm9ybUltYWdlIiwibmV3SXRlbVRpdGxlIiwibmV3SXRlbUltYWdlTGluayIsInBvcHVwV2l0aEF2YXRhckZvcm0iXSwic291cmNlUm9vdCI6IiJ9