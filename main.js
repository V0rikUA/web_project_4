/*! For license information please see main.js.LICENSE.txt */
!function(){var e={232:function(e,t){var i,r;void 0===(r=this)&&void 0!==window&&(r=window),i=function(){return r.VerEx=(e=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),t=function(t){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"","gm"));return e._prefixes="",e._source="",e._suffixes="",e._modifiers="gm",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),e(i,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._source+=e;var t=this._prefixes+this._source+this._suffixes;return this.compile(t,this._modifiers),this}},{key:"startOfLine",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._prefixes=e?"^":"",this.add()}},{key:"endOfLine",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._suffixes=e?"$":"",this.add()}},{key:"then",value:function(e){return e=i.sanitize(e),this.add("(?:"+e+")")}},{key:"find",value:function(e){return this.then(e)}},{key:"maybe",value:function(e){return e=i.sanitize(e),this.add("(?:"+e+")?")}},{key:"or",value:function(e){return this._prefixes+="(?:",this._suffixes=")"+this._suffixes,this.add(")|(?:"),e&&this.then(e),this}},{key:"anything",value:function(){return this.add("(?:.*)")}},{key:"anythingBut",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("(?:[^"+e+"]*)")}},{key:"something",value:function(){return this.add("(?:.+)")}},{key:"somethingBut",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("(?:[^"+e+"]+)")}},{key:"anyOf",value:function(e){return Array.isArray(e)&&(e=e.join("")),e=i.sanitize(e),this.add("["+e+"]")}},{key:"any",value:function(e){return this.anyOf(e)}},{key:"not",value:function(e){return e=i.sanitize(e),this.add("(?!"+e+")"),this}},{key:"range",value:function(){for(var e="",t=1;t<arguments.length;t+=2)e+=i.sanitize(arguments.length<=t-1?void 0:arguments[t-1])+"-"+i.sanitize(arguments.length<=t?void 0:arguments[t]);return this.add("["+e+"]")}},{key:"lineBreak",value:function(){return this.add("(?:\\r\\n|\\r|\\n)")}},{key:"br",value:function(){return this.lineBreak()}},{key:"tab",value:function(){return this.add("\\t")}},{key:"word",value:function(){return this.add("\\w+")}},{key:"digit",value:function(){return this.add("\\d")}},{key:"whitespace",value:function(){return this.add("\\s")}},{key:"addModifier",value:function(e){return this._modifiers.includes(e)||(this._modifiers+=e),this.add()}},{key:"removeModifier",value:function(e){return this._modifiers=this._modifiers.replace(e,""),this.add()}},{key:"withAnyCase",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.removeModifier("i"):this.addModifier("i")}},{key:"stopAtFirst",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.addModifier("g"):this.removeModifier("g")}},{key:"searchOneLine",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.addModifier("m"):this.removeModifier("m")}},{key:"repeatPrevious",value:function(){for(var e=/\d+/,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var n=i.filter((function(t){return e.test(t)}));return 0===n.length||n.length>2||this.add("{"+n.join(",")+"}"),this}},{key:"oneOrMore",value:function(){return this.add("+")}},{key:"multiple",value:function(e,t,r){return void 0!==e&&(e=i.sanitize(e),this.add("(?:"+e+")")),void 0===t&&void 0===r?this.add("*"):void 0!==t&&void 0===r?this.add("{"+t+",}"):void 0!==t&&void 0!==r&&this.add("{"+t+","+r+"}"),this}},{key:"beginCapture",value:function(){return this._suffixes+=")",this.add("(")}},{key:"endCapture",value:function(){return this._suffixes=this._suffixes.slice(0,-1),this.add(")")}},{key:"replace",value:function(e,t){return(e=e.toString()).replace(this,t)}},{key:"toRegExp",value:function(){var e=this.toString().match(/\/(.*)\/([gimuy]+)?/),t=e[1],i=e[2];return new RegExp(t,i)}}],[{key:"sanitize",value:function(e){return e instanceof RegExp?e.source:"number"==typeof e?e:"string"!=typeof e?"":e.replace(/([\].|*?+(){}^$\\:=[])/g,"\\$&")}}]),i}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(RegExp)),function(){var e=new t;return e.sanitize=t.sanitize,e});var e,t}.apply(t,[]),void 0===i||(e.exports=i)}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,i),s.exports}!function(){"use strict";class e{constructor(e,t){this._formSelector=e,this._inputSelector=t.inputSelector,this._errorClass=t.errorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._submitButtonSelector=t.submitButtonSelector,this._fieldSelector=t.fieldSelector,this._formElement=document.querySelector(this._formSelector),this._fieldsetElement=this._formElement.querySelector(this._fieldSelector),this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const i=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),i.textContent=t,i.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t){let{name:i,link:r,alt:n=null,_id:s,owner:o,likes:a}=e;this._name=i,this._link=r,this._alt=null!==n?n:i,this._cardId=s,this._likes=a,this._userId=t.userId,this._cardOwnerId=o._id,this._cardTemplateSelector=t.cardTemplateSelector,this._cardSelector=t.cardSelector,this._imageSelector=t.imageSelector,this._imageDescriptionSelector=t.imageDescriptionSelector,this._likeButtonSelector=t.likeButtonSelector,this._likeActiveSelector=t.likeActiveSelector,this._likeCounterSelector=t.likeCounterSelector,this._deleteButtonSelector=t.deleteButtonSelector,this._previewPopupImageSelector=t.previewPopupImageSelector,this._previewPopupDescriptionSelector=t.previewPopupDescriptionSelector,this._handleCardImageClick=t.handleCardImageClick,this._cardTemplate=document.querySelector(this._cardTemplateSelector),this._handleDeleteServerRequest=t.handleDeleteServerRequest,this._handleLikeServerRequest=t.handleLikeServerRequest,this._handleDleteClick=t.handleDleteClick,this._popupDeleteButtonElement=document.querySelector(t.popupDeleteConfirmationButtonSelector),this._handleDeleteConfirmationSubmit=t.handleDeleteConfirmationSubmit}_initiateLikes(){this.setLikes(this._likes),this.isLiked()&&this._toggleLikeButton()}isLiked(){return this._likes.find((e=>e._id===this._userId))}_toggleLikeButton(){this._likeButton.classList.toggle(this._likeActiveSelector)}setLikes(e){this._likes=e,this._cardElement.querySelector(this._likeCounterSelector).textContent=this._likes.length}getCardId(){return this._cardId}_handleLikeButtonClick(){this._handleLikeServerRequest(this),this._toggleLikeButton()}_handleDeleteButtonClick(){this._handleDleteClick(),this._popupDeleteButtonElement.addEventListener("click",(()=>{this._handleConfirmedDeleteClick()}))}_handleConfirmedDeleteClick(){this._removeCardLocal(),this._handleDeleteServerRequest(this._cardId),this._handleDeleteConfirmationSubmit()}_removeCardLocal(){this._cardElement.remove(),this._cardElement=null}_isOwner(e){return this._userId===e}_setEventListeners(){this._likeButton=this._cardElement.querySelector(this._likeButtonSelector),this._likeButton.addEventListener("click",(()=>{this._handleLikeButtonClick()})),this._isOwner(this._cardOwnerId)&&this._cardElement.querySelector(this._deleteButtonSelector).addEventListener("click",(()=>{this._handleDeleteButtonClick()})),this._cardElement.querySelector(this._imageSelector).addEventListener("click",(()=>{this._handleCardImageClick(this._link,this._name,this._alt)}))}_getCardElement(){const e=this._cardTemplate.content.querySelector(this._cardSelector).cloneNode(!0);return this._isOwner(this._cardOwnerId)||e.querySelector(this._deleteButtonSelector).remove(),e}_populateCardInfo(){const e=this._cardElement.querySelector(this._imageDescriptionSelector),t=this._cardElement.querySelector(this._imageSelector);e.textContent=this._name,t.src=this._link,t.alt=this._alt}getCard(){return this._cardElement=this._getCardElement(),this._populateCardInfo(),this._setEventListeners(),this._initiateLikes(),this._cardElement}}const r=document.querySelector(".profile__button-edit"),n=".profile__avatar",s=document.querySelector(".form__input_type_name"),o=document.querySelector(".form__input_type_title"),a=document.querySelector(".profile__button-add-contetnt"),l=(document.querySelector(".form_type_new-gallery-item"),[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg",alt:"the view of the river surrounded by trees in front of mountains"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg",alt:"the view of lake between two mountains"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg",alt:"the view of sunset upon the mountains"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg",alt:"the view of mountains at night under the bright stars"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg",alt:"lake view in the mountains"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg",alt:"the view of the boats at mountain lake near the pier"}]),u=".popup_type_preview",c=document.querySelector(".popup__loading"),h={inputSelector:".form__input",errorClass:"form__input-error_active",inactiveButtonClass:"form__submit-button-inactive",inputErrorClass:"form__input_type_error",submitButtonSelector:".form__submit-button",fieldSelector:".form__set"};class d{constructor(e){this._popupElement=document.querySelector(e),this._popupCloseButton=this._popupElement.querySelector(".popup__close-button"),this._popupActiveToggleSelector="popup_active",this._handleEscClose=this._handleEscClose.bind(this),this._handleBackgroundClickClose=this._handleBackgroundClickClose.bind(this),this.close=this.close.bind(this)}open(){this._popupElement.classList.add(this._popupActiveToggleSelector),this.setEventListeners()}close(){this._popupElement.classList.remove(this._popupActiveToggleSelector),this.removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleBackgroundClickClose(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._popupCloseButton.addEventListener("click",this.close),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleBackgroundClickClose)}removeEventListeners(){this._popupCloseButton.removeEventListener("click",this.close),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleBackgroundClickClose)}}class _ extends d{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupElement.querySelector("form"),this._handleSubmitButton=this._handleSubmitButton.bind(this)}_getInputValues(){return Array.from(this._popupElement.querySelectorAll("input")).reduce(((e,t)=>({...e,[t.name]:t.value})),{})}_handleSubmitButton(e){e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._handleSubmitButton)}removeEventListeners(){super.removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmitButton)}close(){super.close(),this._form.reset()}}i(232);const p=new class{constructor(e){let{url:t,headers:i}=e;this._url=t,this._headers=i}_checkResponse(e){return e.ok?e.json():Promise.reject(e.StatusText)}getUserInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/users/me";return fetch(this._url+e,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}editProfile(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/users/me";return fetch(this._url+i,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkResponse(e)))}editAvatar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/users/me/avatar";return fetch(this._url+t,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}getInitCard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/cards";return fetch(this._url+e,{method:"GET",headers:this._headers}).then((e=>this._checkResponse(e)))}addCard(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/cards";return fetch(this._url+i,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkResponse(e)))}deleteCard(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/";return fetch(this._url+t+e,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}removeLike(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/likes/";return fetch(this._url+t+e,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponse(e)))}addLike(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cards/likes/";return fetch(this._url+t+e,{method:"PUT",headers:this._headers}).then((e=>this._checkResponse(e)))}}({url:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"2a676dbc-bb82-4a21-8adc-a0cd2428ca04","Content-Type":"application/json"}}),m={cardTemplateSelector:"#gallary-list__item__template",cardSelector:".gallery-list__item",imageSelector:".gallery-list__image",imageDescriptionSelector:".gallery-list__image-description",likeActiveSelector:"gallery-list__like-button-active",likeButtonSelector:".gallery-list__like-button",likeCounterSelector:".gallery-list__like-counter",deleteButtonSelector:".gallery-list__delete-button",previewPopupImageSelector:".popup__preview-image",previewPopupDescriptionSelector:".popup__description",popupDeleteConfirmationButtonSelector:".popup__button_delete-card",previewPopupElement:u,handleCardImageClick:(e,t,i)=>{g.open(e,t,i)},handleDeleteServerRequest:e=>{v(e)},handleLikeServerRequest:e=>{!function(e){e.isLiked()?p.removeLike(e.getCardId()).then((t=>{e.setLikes(t.likes)})).catch(console.log):p.addLike(e.getCardId()).then((t=>{e.setLikes(t.likes)})).catch(console.log)}(e)},handleDleteClick:()=>{b.open()},handleDeleteConfirmationSubmit:()=>{b.close()}};Promise.all([p.getUserInfo(),p.getInitCard()]).then((e=>{let[t,i]=e;m.userId=t._id,y.setUserInfo(t.name,t.about),y.setUserAvatar(t.avatar),I.renderItems(i)})).catch((e=>{f(),alert(e)})).finally((()=>{c.classList.remove("popup_active")}));const f=()=>{y.setUserInfo("Jacques Cousteau","Explorer"),y.setUserAvatar("../images/profile_avatar.png"),I.renderItems(l)},v=e=>{p.deleteCard(e).catch(console.log)},y=new class{constructor(e,t,i){this._userNameElement=document.querySelector(e),this._userProfessionElement=document.querySelector(t),this._userAvatar=document.querySelector(i)}getUserInfo(){return{userName:this._userNameElement.textContent,userJob:this._userProfessionElement.textContent,userAvatar:this._userAvatar.style.backgroundImage}}setUserInfo(e,t){this._userNameElement.textContent=e,this._userProfessionElement.textContent=t}setUserAvatar(e){this._userAvatar.style.backgroundImage="url(".concat(e,")")}}(".profile__name",".profile__profession",n),g=new class extends d{constructor(e){super(e),this._previewPopupImage=document.querySelector(".popup__preview-image"),this._previewPopupDescription=document.querySelector(".popup__description")}open(e,t,i){this._previewPopupImage.src=e,this._previewPopupImage.alt=t,this._previewPopupDescription.textContent=i,super.open()}}(u),k=new _(".popup_type_profile",(e=>{const t=document.querySelector(".form__submit-button_profile");t.textContent="Saving...",p.editProfile(e.name,e.about).then((e=>{y.setUserInfo(e.name,e.about)})).catch((e=>{console.log(e)})).finally((()=>{t.textContent="Save",k.close()}))})),S=new _(".popup_type_new-gallery-item",(e=>{const t=document.querySelector(".form__submit-button_new-gallery-item");t.textContent="Saving...",p.addCard(e.newItemTitle,e.newItemImageLink).then((e=>{I.addItem(e)})).catch(console.log).finally((()=>{S.close(),t.textContent="Create"}))})),E=new _(".popup_type_change-avatar",(e=>{const t=document.querySelector(".form__submit-button_change-avatar");t.textContent="Saving...",p.editAvatar(e.avatar).then((e=>{y.setUserAvatar(e.avatar)})).catch((e=>new Error(e))).finally((()=>{E.close(),t.textContent="Change"}))})),b=new d(".popup_type_delete-card"),C=new e(".form_type_profile",h),w=new e(".form_type_new-gallery-item",h),L=new e(".form_type_change-avatar",h),I=new class{constructor(e,t){let{renderer:i}=e;this._renderer=i,this._container=document.querySelector(t)}renderItems(e){Object.keys(e).reverse().forEach((t=>{this.addItem(e[t])}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({renderer:e=>new t(e,m).getCard()},".gallery-list");r.addEventListener("click",(()=>{var e;e=y.getUserInfo(),s.value=e.userName,o.value=e.userJob,C.resetValidation(),k.open()})),a.addEventListener("click",(()=>{w.resetValidation(),S.open()})),document.querySelector(n).addEventListener("click",(()=>{L.resetValidation(),E.open()})),C.enableValidation(),w.enableValidation(),L.enableValidation()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiOzhXQTBCUSxjQVFKLGlhQStCQSxpVUF0Q0lBLENBQUtDLEVBQUwsU0FrREFDLElBQUFBLHdKQVlBLE9BRHVCLEtBQWZDLFFBQWUsbUJBQ2xCQyxJQUNMLHNCQVNxQkMsTUFBQUEsNEVBR3hCLE9BREcsd0JBQ0gsOEJBU0dBLE1BQUFBLFdBQ0EsUUFBWUMsVUFBTCxlQUFQQyxJQUFBQSxVQUFBQSxLQUFBQSxVQUFBQSxHQUdKLDRDQU9JLENBQ0hMLElBQUFBLGdDQUVERyxFQUFBQSxFQUFBQSxTQUFBQSwyQkFRSSxDQUNISCxJQUFBQSx5QkFFRCxzQkFPSSxDQUNBQSxJQUFBQSxpQ0FFQUcsRUFBQUcsRUFBQUEsU0FBQUEseUJBRUEsR0FMQSw2R0FtQkgsdUJBVU9ILENBQ0hILElBQUFBLDRCQUVERyxPQUFBQSxLQUFRRyxJQUFBQSxTQUNSLEdBSklILGtDQVlJQSxVQUNSLE1BQU8sUUFBU0EsS0FDbkJBLEVBQUFBLEVBQUFBLEtBQUFBLGlEQVVPQSxDQUNISCxJQUFBQSw2QkFFREcsT0FBQUEsS0FBUUcsSUFBQUEsU0FDUixHQUpJSCxzQ0FrQkpBLHFCQUxFQSxLQUNFSSxFQUFNQyxFQUFRTCxLQUFkLHFCQUlKQSxLQUFRRyxJQUFBQSxRQUFpQkcsRUFBU04sTUFDbEMsdURBU0FBLEtBQ0FBLEVBQVlPLEVBQU1QLEtBQVgsS0FHWEEsRUFBQUEsRUFBQUEsU0FBQUEseUJBUUksV0FFQUEsTUFBQUEsU0FBQUEsR0FDSCx1QkFIRyw2QkFnQkksT0FISkEsRUFBSUEsRUFBSixTQUFBQSx5QkFHSSxJQUNBLEdBVVIsdUVBTUlBLDJEQUFnQix3REFHcEIsNkJBVEEsQ0FrQkFILElBQUFBLHNFQVNBQSxJQUFBQSxpREFTQUEsSUFBQUEsaURBU0FBLElBQUFBLG1EQVNBQSxJQUFBQSx5QkFFQSwwQkFPSUEsSUFBQUEsYUFDSUcsTUFBQUEsV0FDSCw4REFnQkwsT0FKU1EsS0FBQUEsV0FBYUMsU0FBS0QsS0FDdkIsS0FBT0EsWUFBUCxHQUdKLGFBTTJCLHNCQUN2QlIsTUFBQUEsU0FBcUJVLFVBQ3hCLHdEQUVELEdBSjJCLENBVUFiLElBQUFBLHNDQUNoQkMsVUFBY2EsT0FBQUEsUUFBMkJELElBQVpSLFVBQU8sS0FBM0NBLFVBQUFBLGlEQUdKLElBTTZCTCxJQUFBQSxzQ0FDbEJDLFVBQWNhLE9BQUFBLFFBQTJCRCxJQUFaUixVQUFPLEtBQTNDQSxVQUFBQSxpREFHSix3QkFRSUYsTUFBQUEsV0FEY1ksZ0VBQVUsaURBUXhCLHNCQUVBWixNQUFBQSxXQUdKLElBRkMsWUFFRCxpSUFLWWEsRUFBQUEsT0FBQUEsR0FJWiw4QkFIV0MsT0FYUCxDQXVCQWpCLElBQUFBLFlBQ0lHLE1BQUFBLFdBQ0EsT0FBQWMsS0FBQSxRQUNILEdBV0osZ0JBRURkLE1BQUFBLFNBQUFBLEVBQUFBLEVBQUFBLEdBV0Msb0JBVERBLEVBQUFBLEVBQUFBLFNBQUFBLDRIQUtlZSxJQUFBQSxHQUNYLDBCQUdILE9BUUcsQ0FDQWxCLElBQUFBLGVBQ0FHLE1BQUFBLFdBR0osMkNBTEksbUNBZ0JBLE9BREFnQixLQUFBQSxVQUFnQkMsS0FBQUEsVUFBaEJDLE1BQUEsTUFDT0YsS0FBQUEsSUFBT0csSUFDakIsR0FTRyxDQUNBdEIsSUFBQUEsOEJBR0gsT0FER21CLEVBQU9BLEVBQUlJLFlBQ2Qsa0JBOWFPLENBQ0h2QixJQUFBQSw0QkFFRCxJQUFJd0IsRUFBQSxLQUFpQkosV0FBVUssTUFBQSx1QkFDM0IsRUFBQUQsRUFBQUEsR0FDSCxPQUVELHNCQUNBLElBQ0EsaUJBRUFyQixNQUFBQSxTQUFBQSxHQUNBLE9BQU11QixhQUFOSCxnQkFJSCxxQkFqRDBCQSxpQkFBQUEsS0F5ZGxCZCxFQUFXSCxrQ0FBaUJHLE9BQ3JDLE9BOWNJLHlJQVpGSCw4Q0FkTnFCLFlBQUFBLHNEQVFBLCtEQU1NckIsRUFZRSxtSEN6QkpzQixFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsMEJDdEJPLE1BQU1JLEVBQ1hWLFlBQVlXLEVBQWNDLEdBQ3hCdEIsS0FBS3VCLGNBQWdCRixFQUNyQnJCLEtBQUt3QixlQUFpQkYsRUFBT0csY0FDN0J6QixLQUFLMEIsWUFBY0osRUFBT0ssV0FDMUIzQixLQUFLNEIscUJBQXVCTixFQUFPTyxvQkFDbkM3QixLQUFLOEIsaUJBQW1CUixFQUFPUyxnQkFDL0IvQixLQUFLZ0Msc0JBQXdCVixFQUFPVyxxQkFDcENqQyxLQUFLa0MsZUFBaUJaLEVBQU9hLGNBRTdCbkMsS0FBS29DLGFBQWVDLFNBQVNDLGNBQWN0QyxLQUFLdUIsZUFDaER2QixLQUFLdUMsaUJBQW1CdkMsS0FBS29DLGFBQWFFLGNBQ3hDdEMsS0FBS2tDLGdCQUdQbEMsS0FBS3dDLFdBQWEsSUFDYnhDLEtBQUtvQyxhQUFhSyxpQkFBaUJ6QyxLQUFLd0IsaUJBRTdDeEIsS0FBSzBDLGVBQWlCMUMsS0FBS29DLGFBQWFFLGNBQ3RDdEMsS0FBS2dDLHNCQUVSLENBRURXLGdCQUFnQkMsRUFBY0MsR0FDNUIsTUFBTUMsRUFBZTlDLEtBQUtvQyxhQUFhRSxjQUFsQixXQUNmTSxFQUFhRyxHQURFLFdBR3JCSCxFQUFhSSxVQUFVN0QsSUFBSWEsS0FBSzhCLGtCQUNoQ2dCLEVBQWFHLFlBQWNKLEVBQzNCQyxFQUFhRSxVQUFVN0QsSUFBSWEsS0FBSzBCLFlBQ2pDLENBRUR3QixnQkFBZ0JOLEdBQ2QsTUFBTUUsRUFBZTlDLEtBQUtvQyxhQUFhRSxjQUFsQixXQUNmTSxFQUFhRyxHQURFLFdBR3JCSCxFQUFhSSxVQUFVRyxPQUFPbkQsS0FBSzhCLGtCQUNuQ2dCLEVBQWFFLFVBQVVHLE9BQU9uRCxLQUFLMEIsYUFDbkNvQixFQUFhRyxZQUFjLEVBQzVCLENBRURHLG9CQUFvQlIsR0FDYkEsRUFBYVMsU0FBU0MsTUFHekJ0RCxLQUFLa0QsZ0JBQWdCTixHQUZyQjVDLEtBQUsyQyxnQkFBZ0JDLEVBQWNBLEVBQWFXLGtCQUluRCxDQUVEQyxtQkFDRSxPQUFPeEQsS0FBS3dDLFdBQVdpQixNQUFNYixJQUNuQkEsRUFBYVMsU0FBU0MsT0FFakMsQ0FFREkscUJBQ00xRCxLQUFLd0Qsb0JBQ1B4RCxLQUFLMEMsZUFBZU0sVUFBVTdELElBQUlhLEtBQUs0QixzQkFDdkM1QixLQUFLMEMsZUFBZWlCLFVBQVcsSUFFL0IzRCxLQUFLMEMsZUFBZU0sVUFBVUcsT0FBT25ELEtBQUs0QixzQkFDMUM1QixLQUFLMEMsZUFBZWlCLFVBQVcsRUFFbEMsQ0FFREMscUJBQ0U1RCxLQUFLd0MsV0FBV3FCLFNBQVNqQixJQUN2QkEsRUFBYWtCLGlCQUFpQixTQUFTLEtBQ3JDOUQsS0FBS29ELG9CQUFvQlIsR0FDekI1QyxLQUFLMEQsb0JBQUwsR0FGRixHQUtILENBRURLLGtCQUNFL0QsS0FBS3dDLFdBQVdxQixTQUFTakIsSUFDdkI1QyxLQUFLa0QsZ0JBQWdCTixFQUFyQixJQUVGNUMsS0FBSzBELG9CQUNOLENBRURNLG1CQUNFaEUsS0FBS29DLGFBQWEwQixpQkFBaUIsVUFBVSxTQUFVRyxHQUNyREEsRUFBTUMsZ0JBQ1AsSUFFRGxFLEtBQUs0RCxvQkFDTixFQ3ZGSSxNQUFNTyxFQUtYekQsWUFBWSxFQUErQ1ksR0FBUSxJQUF2RCxLQUFFOEMsRUFBRixLQUFRQyxFQUFSLElBQWNDLEVBQU0sS0FBcEIsSUFBMEJDLEVBQTFCLE1BQStCQyxFQUEvQixNQUFzQ0MsR0FBaUIsRUFDakV6RSxLQUFLMEUsTUFBUU4sRUFDYnBFLEtBQUsyRSxNQUFRTixFQUNickUsS0FBSzRFLEtBQWUsT0FBUk4sRUFBZUEsRUFBTUYsRUFDakNwRSxLQUFLNkUsUUFBVU4sRUFDZnZFLEtBQUs4RSxPQUFTTCxFQUVkekUsS0FBSytFLFFBQVV6RCxFQUFPMEQsT0FDdEJoRixLQUFLaUYsYUFBZVQsRUFBTUQsSUFFMUJ2RSxLQUFLa0Ysc0JBQXdCNUQsRUFBTzZELHFCQUNwQ25GLEtBQUtvRixjQUFnQjlELEVBQU8rRCxhQUM1QnJGLEtBQUtzRixlQUFpQmhFLEVBQU9pRSxjQUM3QnZGLEtBQUt3RiwwQkFBNEJsRSxFQUFPbUUseUJBQ3hDekYsS0FBSzBGLG9CQUFzQnBFLEVBQU9xRSxtQkFDbEMzRixLQUFLNEYsb0JBQXNCdEUsRUFBT3VFLG1CQUNsQzdGLEtBQUs4RixxQkFBdUJ4RSxFQUFPeUUsb0JBQ25DL0YsS0FBS2dHLHNCQUF3QjFFLEVBQU8yRSxxQkFDcENqRyxLQUFLa0csMkJBQTZCNUUsRUFBTzZFLDBCQUN6Q25HLEtBQUtvRyxpQ0FDSDlFLEVBQU8rRSxnQ0FDVHJHLEtBQUtzRyxzQkFBd0JoRixFQUFPaUYscUJBQ3BDdkcsS0FBS3dHLGNBQWdCbkUsU0FBU0MsY0FBY3RDLEtBQUtrRix1QkFDakRsRixLQUFLeUcsMkJBQTZCbkYsRUFBT29GLDBCQUN6QzFHLEtBQUsyRyx5QkFBMkJyRixFQUFPc0Ysd0JBQ3ZDNUcsS0FBSzZHLGtCQUFvQnZGLEVBQU93RixpQkFDaEM5RyxLQUFLK0csMEJBQTRCMUUsU0FBU0MsY0FDeENoQixFQUFPMEYsdUNBRVRoSCxLQUFLaUgsZ0NBQ0gzRixFQUFPNEYsOEJBQ1YsQ0FLREMsaUJBQ0VuSCxLQUFLb0gsU0FBU3BILEtBQUs4RSxRQUNmOUUsS0FBS3FILFdBQ1BySCxLQUFLc0gsbUJBRVIsQ0FFREQsVUFDRSxPQUFPckgsS0FBSzhFLE9BQU95QyxNQUFNQyxHQUFTQSxFQUFLakQsTUFBUXZFLEtBQUsrRSxTQUNyRCxDQUVEdUMsb0JBQ0V0SCxLQUFLeUgsWUFBWXpFLFVBQVUwRSxPQUFPMUgsS0FBSzRGLG9CQUN4QyxDQUVEd0IsU0FBUzNDLEdBQ1B6RSxLQUFLOEUsT0FBU0wsRUFDWXpFLEtBQUsySCxhQUFhckYsY0FDMUN0QyxLQUFLOEYsc0JBRVc3QyxZQUFjakQsS0FBSzhFLE9BQU84QyxNQUM3QyxDQUVEQyxZQUNFLE9BQU83SCxLQUFLNkUsT0FDYixDQUVEaUQseUJBQ0U5SCxLQUFLMkcseUJBQXlCM0csTUFDOUJBLEtBQUtzSCxtQkFDTixDQUlEUywyQkFDRS9ILEtBQUs2RyxvQkFDTDdHLEtBQUsrRywwQkFBMEJqRCxpQkFBaUIsU0FBUyxLQUN2RDlELEtBQUtnSSw2QkFBTCxHQUVILENBQ0RBLDhCQUNFaEksS0FBS2lJLG1CQUNMakksS0FBS3lHLDJCQUEyQnpHLEtBQUs2RSxTQUNyQzdFLEtBQUtpSCxpQ0FDTixDQUVEZ0IsbUJBQ0VqSSxLQUFLMkgsYUFBYXhFLFNBQ2xCbkQsS0FBSzJILGFBQWUsSUFDckIsQ0FFRE8sU0FBU25GLEdBQ1AsT0FBTy9DLEtBQUsrRSxVQUFZaEMsQ0FDekIsQ0FJRGEscUJBQ0U1RCxLQUFLeUgsWUFBY3pILEtBQUsySCxhQUFhckYsY0FDbkN0QyxLQUFLMEYscUJBRVAxRixLQUFLeUgsWUFBWTNELGlCQUFpQixTQUFTLEtBQ3pDOUQsS0FBSzhILHdCQUFMLElBR0U5SCxLQUFLa0ksU0FBU2xJLEtBQUtpRixlQUNBakYsS0FBSzJILGFBQWFyRixjQUNyQ3RDLEtBQUtnRyx1QkFFTWxDLGlCQUFpQixTQUFTLEtBQ3JDOUQsS0FBSytILDBCQUFMLElBSVUvSCxLQUFLMkgsYUFBYXJGLGNBQWN0QyxLQUFLc0YsZ0JBQzdDeEIsaUJBQWlCLFNBQVMsS0FDOUI5RCxLQUFLc0csc0JBQXNCdEcsS0FBSzJFLE1BQU8zRSxLQUFLMEUsTUFBTzFFLEtBQUs0RSxLQUF4RCxHQUVILENBU0R1RCxrQkFDRSxNQUFNQyxFQUFlcEksS0FBS3dHLGNBQWM2QixRQUNyQy9GLGNBQWN0QyxLQUFLb0YsZUFDbkJrRCxXQUFVLEdBSWIsT0FIS3RJLEtBQUtrSSxTQUFTbEksS0FBS2lGLGVBQ3RCbUQsRUFBYTlGLGNBQWN0QyxLQUFLZ0csdUJBQXVCN0MsU0FFbERpRixDQUNSLENBS0RHLG9CQUNFLE1BQU1DLEVBQW1CeEksS0FBSzJILGFBQWFyRixjQUN6Q3RDLEtBQUt3RiwyQkFFRGlELEVBQW1CekksS0FBSzJILGFBQWFyRixjQUN6Q3RDLEtBQUtzRixnQkFFUGtELEVBQWlCdkYsWUFBY2pELEtBQUswRSxNQUNwQytELEVBQWlCQyxJQUFNMUksS0FBSzJFLE1BQzVCOEQsRUFBaUJuRSxJQUFNdEUsS0FBSzRFLElBQzdCLENBS0QrRCxVQUtFLE9BSkEzSSxLQUFLMkgsYUFBZTNILEtBQUttSSxrQkFDekJuSSxLQUFLdUksb0JBQ0x2SSxLQUFLNEQscUJBQ0w1RCxLQUFLbUgsaUJBQ0VuSCxLQUFLMkgsWUFDYixFQ2pLSSxNQUFNaUIsRUFBb0J2RyxTQUFTQyxjQUN4Qyx5QkFJV3VHLEVBQXdCLG1CQUd4QkMsRUFBZ0J6RyxTQUFTQyxjQUFjLDBCQUN2Q3lHLEVBQXNCMUcsU0FBU0MsY0FDMUMsMkJBT1cwRyxFQUF1QjNHLFNBQVNDLGNBQzNDLGlDQVNXMkcsR0FMcUI1RyxTQUFTQyxjQUN6QywrQkFJMEIsQ0FDMUIsQ0FDRThCLEtBQU0sa0JBQ05DLEtBQU0sbURBQ05DLElBQUssbUVBRVAsQ0FDRUYsS0FBTSxjQUNOQyxLQUFNLHNEQUNOQyxJQUFLLDBDQUVQLENBQ0VGLEtBQU0saUJBQ05DLEtBQU0seURBQ05DLElBQUsseUNBRVAsQ0FDRUYsS0FBTSxVQUNOQyxLQUFNLGtEQUNOQyxJQUFLLHlEQUVQLENBQ0VGLEtBQU0sd0JBQ05DLEtBQU0sa0RBQ05DLElBQUssOEJBRVAsQ0FDRUYsS0FBTSxpQkFDTkMsS0FBTSwrQ0FDTkMsSUFBSywwREFLSTRFLEVBQXVCLHNCQUd2QkMsRUFBZTlHLFNBQVNDLGNBQWMsbUJBR3RDOEcsRUFBdUIsQ0FDbEMzSCxjQUFlLGVBQ2ZFLFdBQVksMkJBQ1pFLG9CQUFxQiwrQkFDckJFLGdCQUFpQix5QkFDakJFLHFCQUFzQix1QkFDdEJFLGNBQWUsY0MxRUYsTUFBTWtILEVBS25CM0ksWUFBWTRJLEdBQ1Z0SixLQUFLdUosY0FBZ0JsSCxTQUFTQyxjQUFjZ0gsR0FDNUN0SixLQUFLd0osa0JBQW9CeEosS0FBS3VKLGNBQWNqSCxjQUFjLHdCQUMxRHRDLEtBQUt5SiwyQkFBNkIsZUFFbEN6SixLQUFLMEosZ0JBQWtCMUosS0FBSzBKLGdCQUFnQkMsS0FBSzNKLE1BQ2pEQSxLQUFLNEosNEJBQThCNUosS0FBSzRKLDRCQUE0QkQsS0FBSzNKLE1BQ3pFQSxLQUFLNkosTUFBUTdKLEtBQUs2SixNQUFNRixLQUFLM0osS0FDOUIsQ0FLRDhKLE9BQ0U5SixLQUFLdUosY0FBY3ZHLFVBQVU3RCxJQUFJYSxLQUFLeUosNEJBQ3RDekosS0FBSytKLG1CQUNOLENBS0RGLFFBQ0U3SixLQUFLdUosY0FBY3ZHLFVBQVVHLE9BQU9uRCxLQUFLeUosNEJBQ3pDekosS0FBS2dLLHNCQUNOLENBS0ROLGdCQUFnQnpGLEdBQ3FCLFdBQWRBLEVBQU1sRixLQUV6QmlCLEtBQUs2SixPQUVSLENBS0RELDRCQUE0QjNGLEdBQ3RCQSxFQUFNZ0csU0FBV2hHLEVBQU1pRyxlQUN6QmxLLEtBQUs2SixPQUVSLENBS0RFLG9CQUNFL0osS0FBS3dKLGtCQUFrQjFGLGlCQUFpQixRQUFTOUQsS0FBSzZKLE9BQ3REeEgsU0FBU3lCLGlCQUFpQixVQUFXOUQsS0FBSzBKLGlCQUMxQzFKLEtBQUt1SixjQUFjekYsaUJBQWlCLFlBQWE5RCxLQUFLNEosNEJBQ3ZELENBS0RJLHVCQUNFaEssS0FBS3dKLGtCQUFrQlcsb0JBQW9CLFFBQVNuSyxLQUFLNkosT0FDekR4SCxTQUFTOEgsb0JBQW9CLFVBQVduSyxLQUFLMEosaUJBQzdDMUosS0FBS3VKLGNBQWNZLG9CQUFvQixZQUFhbkssS0FBSzRKLDRCQUMxRCxFQ2hFWSxNQUFNUSxVQUFzQmYsRUFNekMzSSxZQUFZNEksRUFBZWUsR0FDekJDLE1BQU1oQixHQUNOdEosS0FBS3VLLGtCQUFvQkYsRUFDekJySyxLQUFLd0ssTUFBUXhLLEtBQUt1SixjQUFjakgsY0FBYyxRQUU5Q3RDLEtBQUt5SyxvQkFBc0J6SyxLQUFLeUssb0JBQW9CZCxLQUFLM0osS0FDMUQsQ0FNRDBLLGtCQUNFLE9BQU9wTCxNQUFNcUwsS0FBSzNLLEtBQUt1SixjQUFjOUcsaUJBQWlCLFVBQVVtSSxRQUM5RCxDQUFDQyxFQUFLQyxLQUFOLElBQXNCRCxFQUFLLENBQUNDLEVBQU0xRyxNQUFPMEcsRUFBTTVMLFNBQy9DLENBQUMsRUFFSixDQUVEdUwsb0JBQW9CeEcsR0FDbEJBLEVBQU1DLGlCQUNOLE1BQU02RyxFQUFjL0ssS0FBSzBLLGtCQUN6QjFLLEtBQUt1SyxrQkFBa0JRLEVBQ3hCLENBRURoQixvQkFDRU8sTUFBTVAsb0JBQ04vSixLQUFLd0ssTUFBTTFHLGlCQUFpQixTQUFVOUQsS0FBS3lLLG9CQUM1QyxDQUVEVCx1QkFDRU0sTUFBTU4sdUJBQ05oSyxLQUFLd0ssTUFBTUwsb0JBQW9CLFNBQVVuSyxLQUFLeUssb0JBQy9DLENBS0RaLFFBQ0VTLE1BQU1ULFFBQ043SixLQUFLd0ssTUFBTVEsT0FDWixTQ3dESSxNQUFNQyxFQUFNLElBdkduQixNQVNFdkssWUFBWSxHQUFrQixJQUFsQixJQUFFd0ssRUFBRixRQUFPQyxHQUFXLEVBQzVCbkwsS0FBS29MLEtBQU9GLEVBQ1psTCxLQUFLcUwsU0FBV0YsQ0FDakIsQ0FtQkRHLGVBQWVDLEdBQ2IsT0FBT0EsRUFBU0MsR0FBS0QsRUFBU0UsT0FBU0MsUUFBUUMsT0FBT0osRUFBU0ssV0FDaEUsQ0FPREMsY0FBbUMsSUFBdkJDLEVBQXVCLHVEQUFiLFlBQ3BCLE9BQU9DLE1BQU0vTCxLQUFLb0wsS0FBT1UsRUFBUyxDQUNoQ0UsT0FBUSxNQUNSYixRQUFTbkwsS0FBS3FMLFdBQ2JZLE1BQU1DLEdBQVFsTSxLQUFLc0wsZUFBZVksSUFDdEMsQ0FFREMsWUFBWS9ILEVBQU1nSSxHQUE4QixJQUF2Qk4sRUFBdUIsdURBQWIsWUFDakMsT0FBT0MsTUFBTS9MLEtBQUtvTCxLQUFPVSxFQUFTLENBQ2hDRSxPQUFRLFFBQ1JiLFFBQVNuTCxLQUFLcUwsU0FDZGdCLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRW5JLE9BQU1nSSxZQUM1QkgsTUFBTUMsR0FBUWxNLEtBQUtzTCxlQUFlWSxJQUN0QyxDQUVETSxXQUFXQyxHQUFzQyxJQUE5QlgsRUFBOEIsdURBQXBCLG1CQUMzQixPQUFPQyxNQUFNL0wsS0FBS29MLEtBQU9VLEVBQVMsQ0FDaENFLE9BQVEsUUFDUmIsUUFBU25MLEtBQUtxTCxTQUNkZ0IsS0FBTUMsS0FBS0MsVUFBVSxDQUFFRSxhQUN0QlIsS0FBS2pNLEtBQUtzTCxlQUNkLENBRURvQixjQUFnQyxJQUFwQlosRUFBb0IsdURBQVYsU0FDcEIsT0FBT0MsTUFBTS9MLEtBQUtvTCxLQUFPVSxFQUFTLENBQ2hDRSxPQUFRLE1BQ1JiLFFBQVNuTCxLQUFLcUwsV0FDYlksTUFBTUMsR0FBUWxNLEtBQUtzTCxlQUFlWSxJQUN0QyxDQUVEUyxRQUFRdkksRUFBTUMsR0FBMEIsSUFBcEJ5SCxFQUFvQix1REFBVixTQUM1QixPQUFPQyxNQUFNL0wsS0FBS29MLEtBQU9VLEVBQVMsQ0FDaENFLE9BQVEsT0FDUmIsUUFBU25MLEtBQUtxTCxTQUNkZ0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQm5JLE9BQ0FDLFdBRUQ0SCxNQUFNQyxHQUFRbE0sS0FBS3NMLGVBQWVZLElBQ3RDLENBRURVLFdBQVc3SixHQUF5QixJQUFyQitJLEVBQXFCLHVEQUFYLFVBQ3ZCLE9BQU9DLE1BQU0vTCxLQUFLb0wsS0FBT1UsRUFBVS9JLEVBQUksQ0FDckNpSixPQUFRLFNBQ1JiLFFBQVNuTCxLQUFLcUwsV0FDYlksTUFBTUMsR0FBUWxNLEtBQUtzTCxlQUFlWSxJQUN0QyxDQUVEVyxXQUFXOUosR0FBK0IsSUFBM0IrSSxFQUEyQix1REFBakIsZ0JBQ3ZCLE9BQU9DLE1BQU0vTCxLQUFLb0wsS0FBT1UsRUFBVS9JLEVBQUksQ0FDckNpSixPQUFRLFNBQ1JiLFFBQVNuTCxLQUFLcUwsV0FDYlksTUFBTUMsR0FBUWxNLEtBQUtzTCxlQUFlWSxJQUN0QyxDQUVEWSxRQUFRL0osR0FBK0IsSUFBM0IrSSxFQUEyQix1REFBakIsZ0JBQ3BCLE9BQU9DLE1BQU0vTCxLQUFLb0wsS0FBT1UsRUFBVS9JLEVBQUksQ0FDckNpSixPQUFRLE1BQ1JiLFFBQVNuTCxLQUFLcUwsV0FDYlksTUFBTUMsR0FBUWxNLEtBQUtzTCxlQUFlWSxJQUN0QyxHQUd3QixDQUN6QmhCLElBQUssaURBQ0xDLFFBQVMsQ0FDUDRCLGNBQWUsdUNBQ2YsZUFBZ0Isc0JDOUZkQyxFQUFhLENBQ2pCN0gscUJBQXNCLGdDQUN0QkUsYUFBYyxzQkFDZEUsY0FBZSx1QkFDZkUseUJBQTBCLG1DQUMxQkksbUJBQW9CLG1DQUNwQkYsbUJBQW9CLDZCQUNwQkksb0JBQXFCLDhCQUNyQkUscUJBQXNCLCtCQUN0QkUsMEJBQTJCLHdCQUMzQkUsZ0NBQWlDLHNCQUNqQ1csc0NBQXVDLDZCQUN2Q2lHLG9CQUFxQkMsRUFDckIzRyxxQkFBc0IsQ0FBQ21DLEVBQUt0RSxFQUFNK0ksS0FDaENDLEVBQWV0RCxLQUFLcEIsRUFBS3RFLEVBQU0rSSxFQUEvQixFQUVGekcsMEJBQTRCMkcsSUFDMUIzRyxFQUEwQjJHLEVBQTFCLEVBRUZ6Ryx3QkFBMEIwRyxLQXlENUIsU0FBaUNBLEdBQy9CQSxFQUFLakcsVUFDRDRELEVBQUFBLFdBQ2NxQyxFQUFLekYsYUFDaEJvRSxNQUFNQyxJQUNMb0IsRUFBS2xHLFNBQVM4RSxFQUFJekgsTUFBbEIsSUFFRDhJLE1BQU1DLFFBQVFDLEtBQ2pCeEMsRUFBQUEsUUFDV3FDLEVBQUt6RixhQUNib0UsTUFBTUMsSUFDTG9CLEVBQUtsRyxTQUFTOEUsRUFBSXpILE1BQWxCLElBRUQ4SSxNQUFNQyxRQUFRQyxJQUN0QixDQXRFRzdHLENBQXdCMEcsRUFBeEIsRUFFRnhHLGlCQUFrQixLQUNoQjRHLEVBQXdCNUQsTUFBeEIsRUFFRjVDLCtCQUFnQyxLQUM5QndHLEVBQXdCN0QsT0FBeEIsR0FZSjZCLFFBQVFpQyxJQUFJLENBQUMxQyxFQUFJWSxjQUFlWixFQUFJeUIsZ0JBQ2pDVCxNQUFLLElBQXVCLElBQXJCMkIsRUFBVUMsR0FBVyxFQUMzQmIsRUFBV2hJLE9BQVM0SSxFQUFTckosSUFDN0J1SixFQUFTQyxZQUFZSCxFQUFTeEosS0FBTXdKLEVBQVN4QixPQUM3QzBCLEVBQVNFLGNBQWNKLEVBQVNuQixRQUNoQ3dCLEVBQWFDLFlBQVlMLEVBQXpCLElBRUROLE9BQU9ZLElBQ05DLElBQ0FDLE1BQU1GLEVBQU4sSUFFREcsU0FBUSxLQWRUcEIsRUFBQUEsVUFBQUEsT0FBdUMsZUFlckIsSUFHcEIsTUFBTWtCLEVBQW9CLEtBQ3hCTixFQUFTQyxZQUFZLG1CQUFvQixZQUN6Q0QsRUFBU0UsY0FBYyxnQ0FDdkJDLEVBQWFDLFlBQVloQixFQUF6QixFQWdCSXhHLEVBQTZCMkcsSUFDakNwQyxFQUFJMkIsV0FBV1MsR0FBUUUsTUFBTUMsUUFBUUMsSUFBckMsRUFxR0lLLEVBQVcsSUM3TEYsTUFDYnBOLFlBQVk2TixFQUFrQkMsRUFBaUIzRixHQUM3QzdJLEtBQUt5TyxpQkFBbUJwTSxTQUFTQyxjQUFjaU0sR0FDL0N2TyxLQUFLME8sdUJBQXlCck0sU0FBU0MsY0FBY2tNLEdBQ3JEeE8sS0FBSzJPLFlBQWN0TSxTQUFTQyxjQUFjdUcsRUFDM0MsQ0FNRGdELGNBQ0UsTUFBTyxDQUNMK0MsU0FBVTVPLEtBQUt5TyxpQkFBaUJ4TCxZQUNoQzRMLFFBQVM3TyxLQUFLME8sdUJBQXVCekwsWUFDckM2TCxXQUFZOU8sS0FBSzJPLFlBQVlJLE1BQU1DLGdCQUV0QyxDQVFEakIsWUFBWWEsRUFBVUMsR0FDcEI3TyxLQUFLeU8saUJBQWlCeEwsWUFBYzJMLEVBQ3BDNU8sS0FBSzBPLHVCQUF1QnpMLFlBQWM0TCxDQUMzQyxDQU9EYixjQUFjdkIsR0FDWnpNLEtBQUsyTyxZQUFZSSxNQUFNQyxnQkFBdkIsY0FBZ0R2QyxFQUFoRCxJQUVELEdMbENnQyxpQkFDTSx1QkkyTHZDUyxHQUVJRSxFQUFpQixJRWhNUixjQUE2Qi9ELEVBSzFDM0ksWUFBWTRJLEdBQ1ZnQixNQUFNaEIsR0FDTnRKLEtBQUtpUCxtQkFBcUI1TSxTQUFTQyxjQUFjLHlCQUNqRHRDLEtBQUtrUCx5QkFBMkI3TSxTQUFTQyxjQUFjLHNCQUN4RCxDQVVEd0gsS0FBS3BCLEVBQUt0RSxFQUFNK0ksR0FDZG5OLEtBQUtpUCxtQkFBbUJ2RyxJQUFNQSxFQUM5QjFJLEtBQUtpUCxtQkFBbUIzSyxJQUFNRixFQUM5QnBFLEtBQUtrUCx5QkFBeUJqTSxZQUFja0ssRUFDNUM3QyxNQUFNUixNQUNQLEdGd0t1Q29ELEdBQ3BDaUMsRUFBdUIsSUFBSS9FLEVKM0xHLHVCSXdHSGdGLElBQy9CLE1BQU1DLEVBQXNCaE4sU0FBU0MsY0FDbkMsZ0NBR0YrTSxFQUFvQnBNLFlBQWMsWUFFbENnSSxFQUFBQSxZQUNlbUUsRUFBVWhMLEtBQU1nTCxFQUFVaEQsT0FDdENILE1BQU1DLElBQ0w0QixFQUFTQyxZQUFZN0IsRUFBSTlILEtBQU04SCxFQUFJRSxNQUFuQyxJQUVEbUIsT0FBT1ksSUFDTlgsUUFBUUMsSUFBSVUsRUFBWixJQUVERyxTQUFRLEtBQ1BlLEVBQW9CcE0sWUFBYyxPQUNsQ2tNLEVBQXFCdEYsT0FBckIsR0FWSixJQWdGSXlGLEVBQXFCLElBQUlsRixFSmpMSyxnQ0lpSVBnRixJQUMzQixNQUFNRyxFQUFzQmxOLFNBQVNDLGNBQ25DLHlDQUdGaU4sRUFBb0J0TSxZQUFjLFlBRWxDZ0ksRUFBQUEsUUFDV21FLEVBQVVJLGFBQWNKLEVBQVVLLGtCQUMxQ3hELE1BQU1DLElBQ0wrQixFQUFheUIsUUFBUXhELEVBQXJCLElBRURxQixNQUFNQyxRQUFRQyxLQUNkYSxTQUFRLEtBQ1BnQixFQUFtQnpGLFFBQ25CMEYsRUFBb0J0TSxZQUFjLFFBQWxDLEdBUkosSUE2Q0kwTSxFQUFzQixJQUFJdkYsRUpwTVMsNkJJOEhQZ0YsSUFDaEMsTUFBTVEsRUFBcUJ2TixTQUFTQyxjQUNsQyxzQ0FHRnNOLEVBQW1CM00sWUFBYyxZQUNqQ2dJLEVBQUFBLFdBQ2NtRSxFQUFVM0MsUUFDckJSLE1BQU1DLElBQ0w0QixFQUFTRSxjQUFjOUIsRUFBSU8sT0FBM0IsSUFFRGMsT0FBT1ksR0FBVSxJQUFJMEIsTUFBTTFCLEtBQzNCRyxTQUFRLEtBQ1BxQixFQUFvQjlGLFFBQ3BCK0YsRUFBbUIzTSxZQUFjLFFBQWpDLEdBUkosSUFxRUl5SyxFQUEwQixJQUFJckUsRUp0TFcsMkJJMkx6Q3lHLEVBQXVCLElBQUkxTyxFSnZNRSxxQkl5TWpDOEwsR0FFSTZDLEVBQXVCLElBQUkzTyxFSjVNRSw4Qkk4TWpDOEwsR0FFSThDLEVBQTZCLElBQUk1TyxFSjlNTCwyQklnTmhDOEwsR0FJSWUsRUFBZSxJR25PTixNQU9idk4sWUFBWSxFQUFjdVAsR0FBbUIsSUFBakMsU0FBRUMsR0FBK0IsRUFDM0NsUSxLQUFLbVEsVUFBWUQsRUFDakJsUSxLQUFLb1EsV0FBYS9OLFNBQVNDLGNBQWMyTixFQUMxQyxDQU1EL0IsWUFBWW1DLEdBQ1dDLE9BQU9DLEtBQUtGLEdBQU9HLFVBQzNCM00sU0FBUzlFLElBQ3BCaUIsS0FBSzBQLFFBQVFXLEVBQU10UixHQUFuQixHQUVILENBTUQyUSxRQUFRZSxHQUNOLE1BQU1DLEVBQWExUSxLQUFLbVEsVUFBVU0sR0FDbEN6USxLQUFLb1EsV0FBV08sUUFBUUQsRUFDekIsR0hzTUQsQ0FBRVIsU0FoRGdCVSxHQUNMLElBQUl6TSxFQUFLeU0sRUFBVTVELEdBQ3BCckUsV0pqSzBCLGlCSW9OeEN1RSxFQUFBQSxpQkFBNEMsU0ExSlosS0FMUDJELFFBTVYvQyxFQUFTakMsY0FMdEJxQixFQUFBQSxNQUErQjJELEVBQUtqQyxTQUNwQzFCLEVBQUFBLE1BQXFDMkQsRUFBS2hDLFFBTzFDaUIsRUFBcUIvTCxrQkFDckJvTCxFQUFxQnJGLE1BQXJCLElBc0pGb0QsRUFBQUEsaUJBQStDLFNBL0huQixLQUMxQjZDLEVBQXFCaE0sa0JBQ3JCdUwsRUFBbUJ4RixNQUFuQixJQThIRnpILFNBQ0dDLGNBQWM0SyxHQUNkcEosaUJBQWlCLFNBbkVhLEtBQy9Ca00sRUFBMkJqTSxrQkFDM0I0TCxFQUFvQjdGLE1BQXBCLElBdUVGZ0csRUFBcUI5TCxtQkFDckIrTCxFQUFxQi9MLG1CQUNyQmdNLEVBQTJCaE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4uL1ZlcmJhbEV4cHJlc3Npb25zLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGZpbGUgVmVyYmFsRXhwcmVzc2lvbnMgSmF2YVNjcmlwdCBMaWJyYXJ5XHJcbiAqIEB2ZXJzaW9uIDAuMy4wXHJcbiAqIEBsaWNlbnNlIE1JVFxyXG4gKlxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9WZXJiYWxFeHByZXNzaW9ucy9KU1ZlcmJhbEV4cHJlc3Npb25zXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIERlZmluZSB0aGUgVmVyYmFsRXhwcmVzc2lvbiBjbGFzc1xyXG4gKlxyXG4gKiBAY2xhc3MgVmVyYmFsRXhwcmVzc2lvblxyXG4gKiBAZXh0ZW5kcyB7UmVnRXhwfVxyXG4gKi9cclxuY2xhc3MgVmVyYmFsRXhwcmVzc2lvbiBleHRlbmRzIFJlZ0V4cCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvbi5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQGFsaWFzIFZlckV4XHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBDYWxsIHRoZSBgUmVnRXhwYCBjb25zdHJ1Y3RvciBzbyB0aGF0IGB0aGlzYCBjYW4gYmUgdXNlZFxyXG4gICAgICAgIHN1cGVyKCcnLCAnZ20nKTtcclxuXHJcbiAgICAgICAgLy8gVmFyaWFibGVzIHRvIGhvbGQgdGhlIGV4cHJlc3Npb24gY29uc3RydWN0aW9uIGluIG9yZGVyXHJcbiAgICAgICAgdGhpcy5fcHJlZml4ZXMgPSAnJztcclxuICAgICAgICB0aGlzLl9zb3VyY2UgPSAnJztcclxuICAgICAgICB0aGlzLl9zdWZmaXhlcyA9ICcnO1xyXG4gICAgICAgIHRoaXMuX21vZGlmaWVycyA9ICdnbSc7IC8vICdnbG9iYWwsIG11bHRpbGluZScgbWF0Y2hpbmcgYnkgZGVmYXVsdFxyXG4gICAgfVxyXG5cclxuICAgIC8vIFV0aWxpdHkgLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVzY2FwZSBtZXRhLWNoYXJhY3RlcnMgaW4gdGhlIHBhcmFtZXRlciBhbmQgbWFrZSBpdCBzYWZlIGZvciBhZGRpbmcgdG8gdGhlIGV4cHJlc3Npb25cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtYmVyKX0gdmFsdWUgb2JqZWN0IHRvIHNhbml0aXplXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzYW5pdGl6ZWQgdmFsdWVcclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzYW5pdGl6ZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc291cmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIG1ldGEgY2hhcmFjdGVyc1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL3JlZ2V4cFxyXG4gICAgICAgIGNvbnN0IHRvRXNjYXBlID0gLyhbXFxdLnwqPysoKXt9XiRcXFxcOj1bXSkvZztcclxuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUmVnRXhwL2xhc3RNYXRjaFxyXG4gICAgICAgIGNvbnN0IGxhc3RNYXRjaCA9ICckJic7XHJcblxyXG4gICAgICAgIC8vIEVzY2FwZSBtZXRhIGNoYXJhY3RlcnNcclxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSh0b0VzY2FwZSwgYFxcXFwke2xhc3RNYXRjaH1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBzdHVmZiB0byB0aGUgZXhwcmVzc2lvbiBhbmQgY29tcGlsZSB0aGUgbmV3IGV4cHJlc3Npb24gc28gaXQncyByZWFkeSB0byBiZSB1c2VkLlxyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcil9IFt2YWx1ZT0nJ10gc3R1ZmYgdG8gYWRkXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhZGQodmFsdWUgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX3NvdXJjZSArPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5fcHJlZml4ZXMgKyB0aGlzLl9zb3VyY2UgKyB0aGlzLl9zdWZmaXhlcztcclxuXHJcbiAgICAgICAgdGhpcy5jb21waWxlKHBhdHRlcm4sIHRoaXMuX21vZGlmaWVycyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJ1bGVzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIHN0YXJ0LW9mLWxpbmUgbWF0Y2hpbmdcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc3RhcnRPZkxpbmUoZW5hYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX3ByZWZpeGVzID0gZW5hYmxlID8gJ14nIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIGVuZC1vZi1saW5lIG1hdGNoaW5nXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbmFibGU9dHJ1ZV0gd2hldGhlciB0byBlbmFibGUgdGhpcyBiZWhhdmlvdXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGVuZE9mTGluZShlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgPSBlbmFibGUgPyAnJCcgOiAnJztcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2sgZm9yIHRoZSB2YWx1ZSBwYXNzZWRcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtYmVyKX0gdmFsdWUgdmFsdWUgdG8gZmluZFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgdGhlbih2YWx1ZSkge1xyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGAoPzoke3ZhbHVlfSlgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsaWFzIGZvciB0aGVuKCkgdG8gYWxsb3cgZm9yIHJlYWRhYmxlIHN5bnRheCB3aGVuIHRoZW4oKSBpcyB0aGUgZmlyc3QgbWV0aG9kIGluIHRoZSBjaGFpbi5cclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8bnVtZXIpfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBmaW5kKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgb3B0aW9uYWwgdmFsdWVzXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfG51bWJlcil9IHZhbHVlIHZhbHVlIHRvIGZpbmRcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG1heWJlKHZhbHVlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoYCg/OiR7dmFsdWV9KT9gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbHRlcm5hdGl2ZSBleHByZXNzaW9uc1xyXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxudW1iZXIpfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBvcih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3ByZWZpeGVzICs9ICcoPzonO1xyXG4gICAgICAgIHRoaXMuX3N1ZmZpeGVzID0gYCkke3RoaXMuX3N1ZmZpeGVzfWA7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkKCcpfCg/OicpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGVuKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55IGNoYXJhY3RlciBhbnkgbnVtYmVyIG9mIHRpbWVzXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhbnl0aGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/Oi4qKScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55dGhpbmcgYnV0IHRoZXNlIGNoYXJhY3RlcnNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8c3RyaW5nW118bnVtYmVyW10pfSB2YWx1ZSBjaGFyYWN0ZXJzIHRvIG5vdCBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYW55dGhpbmdCdXQodmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGAoPzpbXiR7dmFsdWV9XSopYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbnkgY2hhcmFjdGVyKHMpIGF0IGxlYXN0IG9uY2VcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHNvbWV0aGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/Oi4rKScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW55IGNoYXJhY3RlciBhdCBsZWFzdCBvbmUgdGltZSBleGNlcHQgZm9yIHRoZXNlIGNoYXJhY3RlcnNcclxuICAgICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXJ8c3RyaW5nW118bnVtYmVyW10pfSB2YWx1ZSBjaGFyYWN0ZXJzIHRvIG5vdCBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc29tZXRoaW5nQnV0KHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuam9pbignJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YWx1ZSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZChgKD86W14ke3ZhbHVlfV0rKWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2ggYW55IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXJzXHJcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyfHN0cmluZ1tdfG51bWJlcltdKX0gdmFsdWUgY2hhcmFjdGVycyB0byBtYXRjaFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYW55T2YodmFsdWUpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbHVlID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGBbJHt2YWx1ZX1dYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG9ydGhhbmQgZm9yIGFueU9mKHZhbHVlKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhbnkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbnlPZih2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGUgcGFyYW1ldGVyIGRvZXMgbm90IGZvbGxvd1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2YWx1ZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgbm90KHZhbHVlKSB7XHJcbiAgICAgICAgdmFsdWUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmFkZChgKD8hJHt2YWx1ZX0pYCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2hpbmcgYW55IGNoYXJhY3RlciB3aXRoaW4gYSByYW5nZSBvZiBjaGFyYWN0ZXJzXHJcbiAgICAgKiBVc2FnZTogLnJhbmdlKCBmcm9tLCB0byBbLCBmcm9tLCB0byAuLi4gXSApXHJcbiAgICAgKiBAcGFyYW0gey4uLnN0cmluZ30gcmFuZ2VzIGNoYXJhY3RlcnMgZGVub3RpbmcgYmVnaW5uaW5nIGFuZCBlbmRpbmcgb2YgcmFuZ2VzXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICByYW5nZSguLi5yYW5nZXMpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgY29uc3QgZnJvbSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUocmFuZ2VzW2kgLSAxXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvID0gVmVyYmFsRXhwcmVzc2lvbi5zYW5pdGl6ZShyYW5nZXNbaV0pO1xyXG5cclxuICAgICAgICAgICAgdmFsdWUgKz0gYCR7ZnJvbX0tJHt0b31gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGBbJHt2YWx1ZX1dYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3BlY2lhbCBjaGFyYWN0ZXJzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIExpbmUgYnJlYWtcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGxpbmVCcmVhaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJyg/OlxcXFxyXFxcXG58XFxcXHJ8XFxcXG4pJyk7IC8vIFVuaXgoTEYpICsgV2luZG93cyhDUkxGKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBzaG9ydGhhbmQgZm9yIGxpbmVCcmVhaygpIGZvciBodG1sLW1pbmRlZCB1c2Vyc1xyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYnIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUJyZWFrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIHRhYiBjaGFyYWN0ZXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHRhYigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJ1xcXFx0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhbnkgYWxwaGFudW1lcmljXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICB3b3JkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgnXFxcXHcrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIHNpbmdsZSBkaWdpdFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgZGlnaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCdcXFxcZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2ggYSBzaW5nbGUgd2hpdGVzcGFjZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgd2hpdGVzcGFjZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJ1xcXFxzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW9kaWZpZXJzIC8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSByZWdleCBtb2RpZmllci9mbGFnXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kaWZpZXIgbW9kaWZpZXIgdG8gYWRkXHJcbiAgICAgKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gcmVjb21waWxlZCBpbnN0YW5jZSBvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICBhZGRNb2RpZmllcihtb2RpZmllcikge1xyXG4gICAgICAgIGlmICghdGhpcy5fbW9kaWZpZXJzLmluY2x1ZGVzKG1vZGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9tb2RpZmllcnMgKz0gbW9kaWZpZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBtb2RpZmllclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGlmaWVyIG1vZGlmaWVyIHRvIHJlbW92ZVxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTW9kaWZpZXIobW9kaWZpZXIpIHtcclxuICAgICAgICB0aGlzLl9tb2RpZmllcnMgPSB0aGlzLl9tb2RpZmllcnMucmVwbGFjZShtb2RpZmllciwgJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udHJvbCBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbmFibGU9dHJ1ZV0gd2hldGhlciB0byBlbmFibGUgdGhpcyBiZWhhdmlvdXJcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHdpdGhBbnlDYXNlKGVuYWJsZSA9IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlID8gdGhpcy5hZGRNb2RpZmllcignaScpIDogdGhpcy5yZW1vdmVNb2RpZmllcignaScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmYXVsdCBiZWhhdmlvdXIgaXMgd2l0aCBcImdcIiBtb2RpZmllciwgc28gd2UgY2FuIHR1cm4gdGhpcyBhbm90aGVyIHdheSBhcm91bmQgdGhhbiBvdGhlciBtb2RpZmllcnNcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc3RvcEF0Rmlyc3QoZW5hYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGUgPyB0aGlzLnJlbW92ZU1vZGlmaWVyKCdnJykgOiB0aGlzLmFkZE1vZGlmaWVyKCdnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sIHRoZSBtdWx0aWxpbmUgbW9kaWZpZXJcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuYWJsZT10cnVlXSB3aGV0aGVyIHRvIGVuYWJsZSB0aGlzIGJlaGF2aW91clxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgc2VhcmNoT25lTGluZShlbmFibGUgPSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuYWJsZSA/IHRoaXMucmVtb3ZlTW9kaWZpZXIoJ20nKSA6IHRoaXMuYWRkTW9kaWZpZXIoJ20nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb29wcyAvL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwZWF0IHRoZSBwcmV2aW91cyBpdGVtIGV4YWN0bHkgbiB0aW1lcyBvciBiZXR3ZWVuIG4gYW5kIG0gdGltZXNcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHJlcGVhdFByZXZpb3VzKC4uLnF1YW50aXR5KSB7XHJcbiAgICAgICAgY29uc3QgaXNJbnRlZ2VyID0gL1xcZCsvO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHF1YW50aXR5LmZpbHRlcihhcmd1bWVudCA9PiBpc0ludGVnZXIudGVzdChhcmd1bWVudCkpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCB8fCB2YWx1ZXMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWRkKGB7JHt2YWx1ZXMuam9pbignLCcpfX1gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXBlYXQgdGhlIHByZXZpb3VzIGF0IGxlYXN0IG9uY2VcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG9uZU9yTW9yZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGQoJysnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGNoIHRoZSB2YWx1ZSB6ZXJvIG9yIG1vcmUgdGltZXNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSB0byBmaW5kXHJcbiAgICAgKiBAcGFyYW0ge2ludGVnZXJ9IFtsb3dlcl0gbWluaW11bSBudW1iZXIgb2YgdGltZXMgdGhlIHZhbHVlIHNob3VsZCBiZSByZXBlYXRlZFxyXG4gICAgICogQHBhcmFtIHtpbnRlZ2VyfSBbdXBwZXJdIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSB2YWx1ZSBzaG91bGQgYmUgcmVwZWF0ZWRcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIG11bHRpcGxlKHZhbHVlLCBsb3dlciwgdXBwZXIpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IFZlcmJhbEV4cHJlc3Npb24uc2FuaXRpemUodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgKD86JHt2YWx1ZX0pYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobG93ZXIgPT09IHVuZGVmaW5lZCAmJiB1cHBlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkKCcqJyk7IC8vIEFueSBudW1iZXIgb2YgdGltZXNcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQgJiYgdXBwZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgeyR7bG93ZXJ9LH1gKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQgJiYgdXBwZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChgeyR7bG93ZXJ9LCR7dXBwZXJ9fWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FwdHVyZSBncm91cHMgLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBhIGNhcHR1cmluZyBncm91cFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgYmVnaW5DYXB0dXJlKCkge1xyXG4gICAgICAgIC8vIEFkZCB0aGUgZW5kIG9mIHRoZSBjYXB0dXJlIGdyb3VwIHRvIHRoZSBzdWZmaXhlcyB0ZW1wb3JhcmlseSBzbyB0aGF0IGNvbXBpbGF0aW9uIGNvbnRpbnVlcyB0byB3b3JrXHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgKz0gJyknO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZCgnKCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5kcyBhIGNhcHR1cmluZyBncm91cFxyXG4gICAgICogQHJldHVybnMge1ZlcmJhbEV4cHJlc3Npb259IHJlY29tcGlsZWQgaW5zdGFuY2Ugb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICogQG1lbWJlcm9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqL1xyXG4gICAgZW5kQ2FwdHVyZSgpIHtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIGxhc3QgcGFyZW50aGVzaXMgZnJvbSB0aGUgX3N1ZmZpeGVzIGFuZCBhZGQgaXQgdG8gdGhlIHJlZ2V4XHJcbiAgICAgICAgdGhpcy5fc3VmZml4ZXMgPSB0aGlzLl9zdWZmaXhlcy5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKCcpJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzY2VsbGFuZW91cyAvL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnRoYW5kIGZ1bmN0aW9uIGZvciB0aGUgc3RyaW5nLnJlcGxhY2UgZnVuY3Rpb24gdG8gYWxsb3cgZm9yIGEgbW9yZSBsb2dpY2FsIGZsb3dcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2Ugc3RyaW5nIHRvIHNlYXJjaCBmb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB2YWx1ZSB0byByZXBsYWNlIHdpdGhcclxuICAgICAqIEByZXR1cm5zIHtWZXJiYWxFeHByZXNzaW9ufSByZWNvbXBpbGVkIGluc3RhbmNlIG9mIFZlcmJhbEV4cHJlc3Npb25cclxuICAgICAqIEBtZW1iZXJvZiBWZXJiYWxFeHByZXNzaW9uXHJcbiAgICAgKi9cclxuICAgIHJlcGxhY2Uoc291cmNlLCB2YWx1ZSkge1xyXG4gICAgICAgIHNvdXJjZSA9IHNvdXJjZS50b1N0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBzb3VyY2UucmVwbGFjZSh0aGlzLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IHRvIFJlZ0V4cCBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtSZWdFeHB9IGVxdWl2YWxlbnQgUmVnRXhwIGluc3RhbmNlXHJcbiAgICAgKiBAbWVtYmVyb2YgVmVyYmFsRXhwcmVzc2lvblxyXG4gICAgICovXHJcbiAgICB0b1JlZ0V4cCgpIHtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy50b1N0cmluZygpLm1hdGNoKC9cXC8oLiopXFwvKFtnaW11eV0rKT8vKTtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gY29tcG9uZW50c1sxXTtcclxuICAgICAgICBjb25zdCBmbGFncyA9IGNvbXBvbmVudHNbMl07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBgVmVyYmFsRXhwcmVzc2lvbmBcclxuICogQGV4cG9ydFxyXG4gKiBAcmV0dXJucyB7VmVyYmFsRXhwcmVzc2lvbn0gbmV3IGluc3RhbmNlXHJcbiAqL1xyXG5mdW5jdGlvbiBWZXJFeCgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVmVyYmFsRXhwcmVzc2lvbigpO1xyXG4gICAgaW5zdGFuY2Uuc2FuaXRpemUgPSBWZXJiYWxFeHByZXNzaW9uLnNhbml0aXplO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBjb25maWcpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2ZpZWxkU2VsZWN0b3IgPSBjb25maWcuZmllbGRTZWxlY3RvcjtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ZpZWxkc2V0RWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2ZpZWxkU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluaywgYWx0ID0gbnVsbCwgX2lkLCBvd25lciwgbGlrZXMgfSwgY29uZmlnKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fYWx0ID0gYWx0ICE9PSBudWxsID8gYWx0IDogbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJZCA9IF9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcblxyXG4gICAgdGhpcy5fdXNlcklkID0gY29uZmlnLnVzZXJJZDtcclxuICAgIHRoaXMuX2NhcmRPd25lcklkID0gb3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY29uZmlnLmNhcmRUZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY29uZmlnLmNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2ltYWdlU2VsZWN0b3IgPSBjb25maWcuaW1hZ2VTZWxlY3RvcjtcclxuICAgIHRoaXMuX2ltYWdlRGVzY3JpcHRpb25TZWxlY3RvciA9IGNvbmZpZy5pbWFnZURlc2NyaXB0aW9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uU2VsZWN0b3IgPSBjb25maWcubGlrZUJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbGlrZUFjdGl2ZVNlbGVjdG9yID0gY29uZmlnLmxpa2VBY3RpdmVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyU2VsZWN0b3IgPSBjb25maWcubGlrZUNvdW50ZXJTZWxlY3RvcjtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvblNlbGVjdG9yID0gY29uZmlnLmRlbGV0ZUJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwSW1hZ2VTZWxlY3RvciA9IGNvbmZpZy5wcmV2aWV3UG9wdXBJbWFnZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwRGVzY3JpcHRpb25TZWxlY3RvciA9XHJcbiAgICAgIGNvbmZpZy5wcmV2aWV3UG9wdXBEZXNjcmlwdGlvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZEltYWdlQ2xpY2sgPSBjb25maWcuaGFuZGxlQ2FyZEltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZVNlcnZlclJlcXVlc3QgPSBjb25maWcuaGFuZGxlRGVsZXRlU2VydmVyUmVxdWVzdDtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VTZXJ2ZXJSZXF1ZXN0ID0gY29uZmlnLmhhbmRsZUxpa2VTZXJ2ZXJSZXF1ZXN0O1xyXG4gICAgdGhpcy5faGFuZGxlRGxldGVDbGljayA9IGNvbmZpZy5oYW5kbGVEbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5fcG9wdXBEZWxldGVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgY29uZmlnLnBvcHVwRGVsZXRlQ29uZmlybWF0aW9uQnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtYXRpb25TdWJtaXQgPVxyXG4gICAgICBjb25maWcuaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpa2UgSGFuZGxlclxyXG4gIC8vXHJcblxyXG4gIF9pbml0aWF0ZUxpa2VzKCkge1xyXG4gICAgdGhpcy5zZXRMaWtlcyh0aGlzLl9saWtlcyk7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5maW5kKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2xpa2VBY3RpdmVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIGNvbnN0IGxpa2VDb3VudGVyRWxlbW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fbGlrZUNvdW50ZXJTZWxlY3RvclxyXG4gICAgKTtcclxuICAgIGxpa2VDb3VudGVyRWxlbW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlU2VydmVyUmVxdWVzdCh0aGlzKTtcclxuICAgIHRoaXMuX3RvZ2dsZUxpa2VCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWxldGUgaGFuZGxlclxyXG4gIC8vXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5faGFuZGxlRGxldGVDbGljaygpO1xyXG4gICAgdGhpcy5fcG9wdXBEZWxldGVCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1lZERlbGV0ZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2hhbmRsZUNvbmZpcm1lZERlbGV0ZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fcmVtb3ZlQ2FyZExvY2FsKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVTZXJ2ZXJSZXF1ZXN0KHRoaXMuX2NhcmRJZCk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtYXRpb25TdWJtaXQoKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVDYXJkTG9jYWwoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9pc093bmVyKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkID09PSBpZCA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50c1xyXG4gIC8vXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5faXNPd25lcih0aGlzLl9jYXJkT3duZXJJZCkpIHtcclxuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b25TZWxlY3RvclxyXG4gICAgICApO1xyXG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljaygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW1hZ2VTZWxlY3Rvcik7XHJcbiAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lLCB0aGlzLl9hbHQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkIEVsZW1lbnRcclxuICAvL1xyXG4gIC8qKlxyXG4gICAqICBDbG9uZXMgdGVtcGxhdGUgZWxlbWVudCBhbmQgcmVtb3ZlIGRlbGV0ZSBidXR0b24gaWYgY2FyZCB3YSBjcmVhdGVkIG5vdCBieSB1c2VyXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBjYXJkIHRlbXBsYXRlIGVsZW1lbnRcclxuICAgKi9cclxuICBfZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBpZiAoIXRoaXMuX2lzT3duZXIodGhpcy5fY2FyZE93bmVySWQpKSB7XHJcbiAgICAgIGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX2RlbGV0ZUJ1dHRvblNlbGVjdG9yKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGaWxsIHVwIGVsZW1lbnQgd2l0aCBkYXRhe25hbWUsIGxpbmssIGFsdCBkZXNjcmlwdGlvbn1cclxuICAgKi9cclxuICBfcG9wdWxhdGVDYXJkSW5mbygpIHtcclxuICAgIGNvbnN0IGNhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9pbWFnZURlc2NyaXB0aW9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5faW1hZ2VTZWxlY3RvclxyXG4gICAgKTtcclxuICAgIGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9hbHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcmV0dXJuIGFuIGNhcmQgZWxlbWVudCBmaWlsZWQgdXAgd2l0aCBkYXRhXHJcbiAgICovXHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZEVsZW1lbnQoKTtcclxuICAgIHRoaXMuX3BvcHVsYXRlQ2FyZEluZm8oKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbml0aWF0ZUxpa2VzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsIi8vY3JlZGVudGlhbHNzIHZhcmlhYmxlc1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCJcclxuKTsgLy9cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lU2VsZWN0b3IgPSBcIi5wcm9maWxlX19uYW1lXCI7IC8vXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJvZmVzc2lvblNlbGVjdG9yID0gXCIucHJvZmlsZV9fcHJvZmVzc2lvblwiOyAvL1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhclNlbGVjdG9yID0gXCIucHJvZmlsZV9fYXZhdGFyXCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhckNoYW5nZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9jaGFuZ2UtYXZhdGFyXCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiOyAvL1xyXG5leHBvcnQgY29uc3QgdXNlcklucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIpOyAvL1xyXG5leHBvcnQgY29uc3QgdXNlcklucHV0UHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV90aXRsZVwiXHJcbik7IC8vXHJcbmV4cG9ydCBjb25zdCBuZXdJdGVtRm9ybVNlbGVjdG9yID0gXCIuZm9ybV90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtU2VsZWN0b3IgPSBcIi5mb3JtX3R5cGVfcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybVNlbGVjdG9yID0gXCIuZm9ybV90eXBlX2NoYW5nZS1hdmF0YXJcIjtcclxuXHJcbi8vTmV3Q2FyZCB2YXJpYWJsZXNcclxuZXhwb3J0IGNvbnN0IGFkZEdhbGxlcnlJdGVtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19idXR0b24tYWRkLWNvbnRldG50XCJcclxuKTsgLy9cclxuZXhwb3J0IGNvbnN0IGdhbGxlcnlJdGVtc0xpc3RTZWxlY3RvciA9IFwiLmdhbGxlcnktbGlzdFwiOyAvL1xyXG5leHBvcnQgY29uc3QgbmV3SXRlbVBvcHVwU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIjsgLy9cclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRHYWxsZXJ5SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV90eXBlX25ldy1nYWxsZXJ5LWl0ZW1cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVDb25maXJtYXRpb25TZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgICBhbHQ6IFwidGhlIHZpZXcgb2YgdGhlIHJpdmVyIHN1cnJvdW5kZWQgYnkgdHJlZXMgaW4gZnJvbnQgb2YgbW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcInRoZSB2aWV3IG9mIGxha2UgYmV0d2VlbiB0d28gbW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgYWx0OiBcInRoZSB2aWV3IG9mIHN1bnNldCB1cG9uIHRoZSBtb3VudGFpbnNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcInRoZSB2aWV3IG9mIG1vdW50YWlucyBhdCBuaWdodCB1bmRlciB0aGUgYnJpZ2h0IHN0YXJzXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcImxha2UgdmlldyBpbiB0aGUgbW91bnRhaW5zXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgICBhbHQ6IFwidGhlIHZpZXcgb2YgdGhlIGJvYXRzIGF0IG1vdW50YWluIGxha2UgbmVhciB0aGUgcGllclwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vL1ByZXdpZXYgdmFyaWFibGVcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdQb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9wcmV2aWV3XCI7XHJcblxyXG4vL2xvYWRpbmcgYW5pbWF0aW9uXHJcbmV4cG9ydCBjb25zdCBsb2FkaW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19sb2FkaW5nXCIpO1xyXG5cclxuLy9jb25maWdzXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uLWluYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGZpZWxkU2VsZWN0b3I6IFwiLmZvcm1fX3NldFwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9wdXBTZWxlY3RvciBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3BvcHVwQWN0aXZlVG9nZ2xlU2VsZWN0b3IgPSBcInBvcHVwX2FjdGl2ZVwiO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlID0gdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBhZGQgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyB0byBtb2RhbCB3aW5kb3cgdGFnIHRvIHJpc2UgaXQgdXBcclxuICAgKi9cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBBY3RpdmVUb2dnbGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBoYW5kbGUgY2xvc2UgbW9kYWwgd2luZG93IHdoZW4gRXNjYXBlIGlzIGRvd25cclxuICAgKi9cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IGlzS2V5RG93bkVzYyA9IGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIjtcclxuICAgIGlmIChpc0tleURvd25Fc2MpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogaGFuZGxlIGNsb3NlIG1vZGFsIHdpbmRvdyB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBfaGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2V0IGV2ZW50IGxpc3RlbmVycyB0byBjbG9zZSBidXR0b24gY2xpY2ssIGNsb3NlIG9uIEVzYyBkb3duIGFuZCB3aGVuIG1vdXNlZG93biBvdXRzaWRlIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgKi9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnNcclxuICAgKi9cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQmFja2dyb3VuZENsaWNrQ2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9wdXBTZWxlY3RvciBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUZvcm1TdWJtaXQgYSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBQb3B1cFdpdGhGb3JtIGNhbGxzIHdoZW4gdGhlIGZvcm3igJlzIHN1Ym1pdCBldmVudCBmaXJlc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbi5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICAvKipcclxuICAgKmNvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmRcclxuICAgKiBAcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBkYXRhLlxyXG4gICAqXHJcbiAgICovXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKSkucmVkdWNlKFxyXG4gICAgICAoYWNjLCBpbnB1dCkgPT4gKHsgLi4uYWNjLCBbaW5wdXQubmFtZV06IGlucHV0LnZhbHVlIH0pLFxyXG4gICAgICB7fVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXRCdXR0b24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdEJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZW1vdmUgXCJwb3B1cF9hY3RpdmVcIiBjbGFzcyBhbmQgYWxsIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVzZXQgZm9ybSBpbnB1dCBmaWVsZHNcclxuICAgKi9cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWZXJFeCBmcm9tIFwidmVyYmFsLWV4cHJlc3Npb25zXCI7XHJcblxyXG5jbGFzcyBBcGkge1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgQVBJIHdhcyBkZXNpZ24gdG8gd29yayB3aXRoIHJlbW90ZSBwcm9qZWN0IFwiQXJvdW5kIHRoZSBVLlMuXCIuXHJcbiAgICogQWxsIGZ1bmN0aW9uYWxpdHkgaXMgYmFzZWQgb24gY2FwYWJpbGl0aWVzIG9mIHJlbW90ZSBzZXJ2ZXIuXHJcbiAgICogVGhlIEFQSSBpcyBjYXBhYmxlIG9mIHJlY2lldmluZywgdXBkYXRpbmcsIGNyZWF0aW5nIGFuZCByZW1vdmluZyBkYXRhIGZyb20gcmVtb3RlIHNlcnZlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgYW4gdXJsIHRvIGNvbm5lY3QgdG8gcmVtb3RlIHNlcnZlclxyXG4gICAqIEBwYXJhbSB7SGVhZGVyc30gaGVhZGVycyBhbiBhdXRob3JpemF0aW9uIGhlYWRlciBmb3Igc2VuZGluZyByZXF1ZXN0cyB0byB0aGUgcmVtb3RlIHNlcnZlclxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHsgdXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gX2lzVXJsKHVybCkge1xyXG4gIC8vICAgY29uc3QgcmVnZXhwID0gVmVyRXgoKVxyXG4gIC8vICAgICAuc3RhcnRPZkxpbmUoKVxyXG4gIC8vICAgICAudGhlbihcImh0dHBcIilcclxuICAvLyAgICAgLm1heWJlKFwic1wiKVxyXG4gIC8vICAgICAudGhlbihcIjovL1wiKVxyXG4gIC8vICAgICAubWF5YmUoXCJ3d3cuXCIpXHJcbiAgLy8gICAgIC5hbnl0aGluZ0J1dChcIiBcIilcclxuICAvLyAgICAgLmVuZE9mTGluZSgpO1xyXG5cclxuICAvLyAgIGlmIChyZWdleHAudGVzdCh1cmwpKSB7XHJcbiAgLy8gICAgIHJldHVybiB1cmw7XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHJpbmcgaXMgbm90IGFuIFVSTFwiKTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2sgPyByZXNwb25zZS5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5TdGF0dXNUZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybFBhdGggcGF0aCB0byB1c2VyIGRhdGFcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBhbiBvYmplY3QgdGhhdCBjb250YWlucyB1c2VyIGluZm9cclxuICAgKi9cclxuICBnZXRVc2VySW5mbyh1cmxQYXRoID0gXCIvdXNlcnMvbWVcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGUobmFtZSwgYWJvdXQsIHVybFBhdGggPSBcIi91c2Vycy9tZVwiKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgdXJsUGF0aCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGVkaXRBdmF0YXIoYXZhdGFyLCB1cmxQYXRoID0gXCIvdXNlcnMvbWUvYXZhdGFyXCIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyB1cmxQYXRoLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0Q2FyZCh1cmxQYXRoID0gXCIvY2FyZHNcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChuYW1lLCBsaW5rLCB1cmxQYXRoID0gXCIvY2FyZHNcIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGgsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkLCB1cmxQYXRoID0gXCIvY2FyZHMvXCIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyB1cmxQYXRoICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShpZCwgdXJsUGF0aCA9IFwiL2NhcmRzL2xpa2VzL1wiKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgdXJsUGF0aCArIGlkLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoaWQsIHVybFBhdGggPSBcIi9jYXJkcy9saWtlcy9cIikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArIHVybFBhdGggKyBpZCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgdXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjJhNjc2ZGJjLWJiODItNGEyMS04YWRjLWEwY2QyNDI4Y2EwNFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL3V0aWxzL2FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBcIjtcclxuXHJcbi8vXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhcmlhYmxlc1xyXG4vL1xyXG5cclxuY29uc3QgY2FyZENvbmZpZyA9IHtcclxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcjogXCIjZ2FsbGFyeS1saXN0X19pdGVtX190ZW1wbGF0ZVwiLFxyXG4gIGNhcmRTZWxlY3RvcjogXCIuZ2FsbGVyeS1saXN0X19pdGVtXCIsXHJcbiAgaW1hZ2VTZWxlY3RvcjogXCIuZ2FsbGVyeS1saXN0X19pbWFnZVwiLFxyXG4gIGltYWdlRGVzY3JpcHRpb25TZWxlY3RvcjogXCIuZ2FsbGVyeS1saXN0X19pbWFnZS1kZXNjcmlwdGlvblwiLFxyXG4gIGxpa2VBY3RpdmVTZWxlY3RvcjogXCJnYWxsZXJ5LWxpc3RfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiLFxyXG4gIGxpa2VCdXR0b25TZWxlY3RvcjogXCIuZ2FsbGVyeS1saXN0X19saWtlLWJ1dHRvblwiLFxyXG4gIGxpa2VDb3VudGVyU2VsZWN0b3I6IFwiLmdhbGxlcnktbGlzdF9fbGlrZS1jb3VudGVyXCIsXHJcbiAgZGVsZXRlQnV0dG9uU2VsZWN0b3I6IFwiLmdhbGxlcnktbGlzdF9fZGVsZXRlLWJ1dHRvblwiLFxyXG4gIHByZXZpZXdQb3B1cEltYWdlU2VsZWN0b3I6IFwiLnBvcHVwX19wcmV2aWV3LWltYWdlXCIsXHJcbiAgcHJldmlld1BvcHVwRGVzY3JpcHRpb25TZWxlY3RvcjogXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgcG9wdXBEZWxldGVDb25maXJtYXRpb25CdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvbl9kZWxldGUtY2FyZFwiLFxyXG4gIHByZXZpZXdQb3B1cEVsZW1lbnQ6IGNvbnN0YW50LnByZXZpZXdQb3B1cFNlbGVjdG9yLFxyXG4gIGhhbmRsZUNhcmRJbWFnZUNsaWNrOiAoc3JjLCBuYW1lLCBkZXNjcmlwdGlvbikgPT4ge1xyXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihzcmMsIG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICB9LFxyXG4gIGhhbmRsZURlbGV0ZVNlcnZlclJlcXVlc3Q6IChjYXJkSWQpID0+IHtcclxuICAgIGhhbmRsZURlbGV0ZVNlcnZlclJlcXVlc3QoY2FyZElkKTtcclxuICB9LFxyXG4gIGhhbmRsZUxpa2VTZXJ2ZXJSZXF1ZXN0OiAoY2FyZCkgPT4ge1xyXG4gICAgaGFuZGxlTGlrZVNlcnZlclJlcXVlc3QoY2FyZCk7XHJcbiAgfSxcclxuICBoYW5kbGVEbGV0ZUNsaWNrOiAoKSA9PiB7XHJcbiAgICBwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgfSxcclxuICBoYW5kbGVEZWxldGVDb25maXJtYXRpb25TdWJtaXQ6ICgpID0+IHtcclxuICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgfSxcclxufTtcclxuXHJcbi8vXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uc1xyXG4vL1xyXG5cclxuZnVuY3Rpb24gZGlzYWJsZUxvYWRpbmcoKSB7XHJcbiAgY29uc3RhbnQubG9hZGluZ1BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XHJcbn1cclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRDYXJkKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgY2FyZENvbmZpZy51c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICBjYXJkUmVuZGVyZXIucmVuZGVySXRlbXMoY2FyZHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgcmVuZGVyRGVmYXVsdFBhZ2UoKTtcclxuICAgIGFsZXJ0KGVycm9yKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIGRpc2FibGVMb2FkaW5nKCk7XHJcbiAgfSk7XHJcblxyXG5jb25zdCByZW5kZXJEZWZhdWx0UGFnZSA9ICgpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhcIkphY3F1ZXMgQ291c3RlYXVcIiwgXCJFeHBsb3JlclwiKTtcclxuICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKFwiLi4vaW1hZ2VzL3Byb2ZpbGVfYXZhdGFyLnBuZ1wiKTtcclxuICBjYXJkUmVuZGVyZXIucmVuZGVySXRlbXMoY29uc3RhbnQuaW5pdGlhbENhcmRzKTtcclxufTtcclxuXHJcbmNvbnN0IGZpbGxQcm9maWxlSW5mbyA9IChpbmZvKSA9PiB7XHJcbiAgY29uc3RhbnQudXNlcklucHV0TmFtZS52YWx1ZSA9IGluZm8udXNlck5hbWU7XHJcbiAgY29uc3RhbnQudXNlcklucHV0UHJvZmVzc2lvbi52YWx1ZSA9IGluZm8udXNlckpvYjtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZVByb2ZpbGVFZGl0V2luZG93ID0gKCkgPT4ge1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGZpbGxQcm9maWxlSW5mbyhpbmZvKTtcclxuXHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBXaXRoRm9ybVByb2ZpbGUub3BlbigpO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlRGVsZXRlU2VydmVyUmVxdWVzdCA9IChjYXJkSWQpID0+IHtcclxuICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpLmNhdGNoKGNvbnNvbGUubG9nKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VTZXJ2ZXJSZXF1ZXN0KGNhcmQpIHtcclxuICBjYXJkLmlzTGlrZWQoKVxyXG4gICAgPyBhcGlcclxuICAgICAgICAucmVtb3ZlTGlrZShjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIGNhcmQuc2V0TGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgIDogYXBpXHJcbiAgICAgICAgLmFkZExpa2UoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG59XHJcblxyXG5jb25zdCBoYW5kbGVOZXdJdGVtV2luZG93ID0gKCkgPT4ge1xyXG4gIG5ld0NhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwV2l0aEZvcm1JbWFnZS5vcGVuKCk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCA9ICh1c2VySW5wdXQpID0+IHtcclxuICBjb25zdCBzdWJtaXRCdXR0b25Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLmZvcm1fX3N1Ym1pdC1idXR0b25fcHJvZmlsZVwiXHJcbiAgKTtcclxuXHJcbiAgc3VibWl0QnV0dG9uUHJvZmlsZS50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4gIGFwaVxyXG4gICAgLmVkaXRQcm9maWxlKHVzZXJJbnB1dC5uYW1lLCB1c2VySW5wdXQuYWJvdXQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc3VibWl0QnV0dG9uUHJvZmlsZS50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXQgPSAodXNlcklucHV0KSA9PiB7XHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiLmZvcm1fX3N1Ym1pdC1idXR0b25fY2hhbmdlLWF2YXRhclwiXHJcbiAgKTtcclxuXHJcbiAgc3VibWl0QnV0dG9uQXZhdGFyLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICBhcGlcclxuICAgIC5lZGl0QXZhdGFyKHVzZXJJbnB1dC5hdmF0YXIpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4gbmV3IEVycm9yKGVycm9yKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBXaXRoQXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gICAgICBzdWJtaXRCdXR0b25BdmF0YXIudGV4dENvbnRlbnQgPSBcIkNoYW5nZVwiO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVOZXdJdGVtU3VibWl0ID0gKHVzZXJJbnB1dCkgPT4ge1xyXG4gIGNvbnN0IG5ld0l0ZW1TdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvbl9uZXctZ2FsbGVyeS1pdGVtXCJcclxuICApO1xyXG5cclxuICBuZXdJdGVtU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh1c2VySW5wdXQubmV3SXRlbVRpdGxlLCB1c2VySW5wdXQubmV3SXRlbUltYWdlTGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZFJlbmRlcmVyLmFkZEl0ZW0ocmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5sb2cpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1JbWFnZS5jbG9zZSgpO1xyXG4gICAgICBuZXdJdGVtU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIjtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlUHJvZmlsZUF2YXRyV2luZG93ID0gKCkgPT4ge1xyXG4gIHBvZmlsZUF2YXRhckZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwV2l0aEF2YXRhckZvcm0ub3BlbigpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYXJkSXRlbSBvYmplY3QgdGhhdCBjb250YWlucyBuYW1lIGFuZCBsaW5rIG9mIG5ldyBjYXJkXHJcbiAqIEByZXR1cm5zIGFuIGNhcmQgZWxlbWVudFxyXG4gKi9cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChjYXJkSXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkSXRlbSwgY2FyZENvbmZpZyk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0Q2FyZCgpO1xyXG59O1xyXG5cclxuLy9cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IGluc3RhbmNlc1xyXG4vL1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgY29uc3RhbnQucHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICBjb25zdGFudC5wcm9maWxlUHJvZmVzc2lvblNlbGVjdG9yLFxyXG4gIGNvbnN0YW50LnByb2ZpbGVBdmF0YXJTZWxlY3RvclxyXG4pO1xyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShjb25zdGFudC5wcmV2aWV3UG9wdXBTZWxlY3Rvcik7XHJcbmNvbnN0IHBvcHVwV2l0aEZvcm1Qcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgY29uc3RhbnQucG9wdXBQcm9maWxlU2VsZWN0b3IsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgcG9wdXBXaXRoRm9ybUltYWdlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgY29uc3RhbnQubmV3SXRlbVBvcHVwU2VsZWN0b3IsXHJcbiAgaGFuZGxlTmV3SXRlbVN1Ym1pdFxyXG4pO1xyXG5jb25zdCBwb3B1cFdpdGhBdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgY29uc3RhbnQucG9wdXBBdmF0YXJDaGFuZ2VTZWxlY3RvcixcclxuICBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwKFxyXG4gIGNvbnN0YW50LnBvcHVwRGVsZXRlQ29uZmlybWF0aW9uU2VsZWN0b3JcclxuKTtcclxuXHJcbi8vY3JlYXRlIGZvcm0gdmFsaWRhdGlhbiBpbnN0YW5jZXMgdG8gY2hlY2sgZm9ybSBpbnB1dCBmaWVsZHNcclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudC5wcm9maWxlRm9ybVNlbGVjdG9yLFxyXG4gIGNvbnN0YW50LmZvcm1WYWxpZGF0aW9uQ29uZmlnXHJcbik7XHJcbmNvbnN0IG5ld0NhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnQubmV3SXRlbUZvcm1TZWxlY3RvcixcclxuICBjb25zdGFudC5mb3JtVmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5jb25zdCBwb2ZpbGVBdmF0YXJGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbnN0YW50LmF2YXRhckZvcm1TZWxlY3RvcixcclxuICBjb25zdGFudC5mb3JtVmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5cclxuLy9jcmVhdGUgaW5zdGFuY2Ugb2YgY2FyZCByZW5kZXJlciB0byBhZGQgY2FyZCB0byB0aGUgcGFnZVxyXG5jb25zdCBjYXJkUmVuZGVyZXIgPSBuZXcgU2VjdGlvbihcclxuICB7IHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgY29uc3RhbnQuZ2FsbGVyeUl0ZW1zTGlzdFNlbGVjdG9yXHJcbik7XHJcblxyXG4vL0FkZCBldmVudCBMaXN0ZW5lcnMgdG8gYnV0dG9uc1xyXG5jb25zdGFudC5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUHJvZmlsZUVkaXRXaW5kb3cpO1xyXG5jb25zdGFudC5hZGRHYWxsZXJ5SXRlbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmV3SXRlbVdpbmRvdyk7XHJcbmRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3IoY29uc3RhbnQucHJvZmlsZUF2YXRhclNlbGVjdG9yKVxyXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUHJvZmlsZUF2YXRyV2luZG93KTtcclxuXHJcbi8vXHJcbi8vXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgRW5hYmxlIHZsaWRhdGlvbiB0byBmb3Jtc1xyXG4vL1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbm5ld0NhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucG9maWxlQXZhdGFyRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCBwcm9maWxlQXZhdGFyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0IHVzZXIgaW5mbyBmcm9tIERPTVxyXG4gICAqIEByZXR1cm5zIGFzIGFuIG9iamVjdFxyXG4gICAqL1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckpvYjogdGhpcy5fdXNlclByb2Zlc3Npb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICB1c2VyQXZhdGFyOiB0aGlzLl91c2VyQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdXNlcidzIG5hbWUsIGpvYiBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJOYW1lXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJKb2JcclxuICAgKi9cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckpvYikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VySm9iO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogIFNldCB1c2VyIGF2YXRhciBpbWFnZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtsaW5rfSBhdmF0YXJcclxuICAgKi9cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YXZhdGFyfSlgO1xyXG4gICAgLy8gdGhpcy5fdXNlckF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IFwiY292ZXJcIjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwb3B1cFNlbGVjdG9yICBzZWxlY3RvciB0byBtYW5pcHVsYXRlIG1vZGFsIHdpbmRvd1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcmV2aWV3LWltYWdlXCIpO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19kZXNjcmlwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogb3BlbiBtb2RhbCB3aW5kb3cgYW5kIGZpbGwgZmllbGQgd2l0aCBwcm92aWRlZCBzdHJpbmdzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3JjIGxpbmsgdG8gaW1hZ2UgdG8gZGlzcGxheVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGltYWdlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRlc2NyaXB0aW9uIGRlc2NyaXB0aW9uIHRvIHRoZSBpbWFnZVxyXG4gICAqL1xyXG4gIG9wZW4oc3JjLCBuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwSW1hZ2Uuc3JjID0gc3JjO1xyXG4gICAgdGhpcy5fcHJldmlld1BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdQb3B1cERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gaXRlbXMgYW4gYXJyYXkgdGhhdCBjb250YWlucyBpdGVtcyBmb3IgaW5pdGlhbCByZW5kZXIuIEJ5IGRlZmF1bHQgaXMgc2V0IHRvIG51bGwuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVuZGVyZXIgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggZmlyZXMgd2hlbiBuZXcgaXRlbSBuZWVkIHRvIGJlIHJlbmRlcmVkXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRhaW5lclNlbGVjdG9yIHNlbGVjdG9yIHRvIHByZXBlbmQgbmV3IGl0ZW1zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUYWtlcyBhbiBvYmplY3Qgb2Ygb2JqZWN0cyBhbmQgYWRkIGl0IHRvIGNvbnRhaW5lciBpbiByZXZlcnNlIG9yZGVyXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbXMgb2JqZWN0IG9mIG9iamVjdHMgdGhhdCBjb25hdGFpbnMgZGF0YSB0byBhZGQgbmV3IGNhcmRzXHJcbiAgICovXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGNvbnN0IHJldmVyc2VkS2V5cyA9IE9iamVjdC5rZXlzKGl0ZW1zKS5yZXZlcnNlKCk7XHJcbiAgICByZXZlcnNlZEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtc1trZXldKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSBhbiBvYmplY3RcclxuICAgKi9cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKG5ld0VsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX2luaGVyaXRzIiwiX3NvdXJjZSIsImtleSIsImVuYWJsZSIsIl9wcmVmaXhlcyIsInZhbHVlIiwiYWRkIiwiYXJndW1lbnRzIiwiVmVyYmFsRXhwcmVzc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsInNhbml0aXplIiwiYW55T2YiLCJfbW9kaWZpZXJzIiwiaW5jbHVkZXMiLCJhZGRNb2RpZmllciIsInJlbW92ZU1vZGlmaWVyIiwicXVhbnRpdHkiLCJ2YWx1ZXMiLCJ0aGlzIiwidXBwZXIiLCJzb3VyY2UiLCJ0b1N0cmluZyIsInNsaWNlIiwicmVwbGFjZSIsIlJlZ0V4cCIsImNvbXBvbmVudHMiLCJtYXRjaCIsImxhc3RNYXRjaCIsImNvbnN0cnVjdG9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiRm9ybVZhbGlkYXRvciIsImZvcm1TZWxlY3RvciIsImNvbmZpZyIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZmllbGRTZWxlY3RvciIsImZpZWxkU2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfZmllbGRzZXRFbGVtZW50IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwidGV4dENvbnRlbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJhbHQiLCJfaWQiLCJvd25lciIsImxpa2VzIiwiX25hbWUiLCJfbGluayIsIl9hbHQiLCJfY2FyZElkIiwiX2xpa2VzIiwiX3VzZXJJZCIsInVzZXJJZCIsIl9jYXJkT3duZXJJZCIsIl9jYXJkVGVtcGxhdGVTZWxlY3RvciIsImNhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiX2NhcmRTZWxlY3RvciIsImNhcmRTZWxlY3RvciIsIl9pbWFnZVNlbGVjdG9yIiwiaW1hZ2VTZWxlY3RvciIsIl9pbWFnZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJpbWFnZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbGlrZUJ1dHRvblNlbGVjdG9yIiwibGlrZUJ1dHRvblNlbGVjdG9yIiwiX2xpa2VBY3RpdmVTZWxlY3RvciIsImxpa2VBY3RpdmVTZWxlY3RvciIsIl9saWtlQ291bnRlclNlbGVjdG9yIiwibGlrZUNvdW50ZXJTZWxlY3RvciIsIl9kZWxldGVCdXR0b25TZWxlY3RvciIsImRlbGV0ZUJ1dHRvblNlbGVjdG9yIiwiX3ByZXZpZXdQb3B1cEltYWdlU2VsZWN0b3IiLCJwcmV2aWV3UG9wdXBJbWFnZVNlbGVjdG9yIiwiX3ByZXZpZXdQb3B1cERlc2NyaXB0aW9uU2VsZWN0b3IiLCJwcmV2aWV3UG9wdXBEZXNjcmlwdGlvblNlbGVjdG9yIiwiX2hhbmRsZUNhcmRJbWFnZUNsaWNrIiwiaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJfY2FyZFRlbXBsYXRlIiwiX2hhbmRsZURlbGV0ZVNlcnZlclJlcXVlc3QiLCJoYW5kbGVEZWxldGVTZXJ2ZXJSZXF1ZXN0IiwiX2hhbmRsZUxpa2VTZXJ2ZXJSZXF1ZXN0IiwiaGFuZGxlTGlrZVNlcnZlclJlcXVlc3QiLCJfaGFuZGxlRGxldGVDbGljayIsImhhbmRsZURsZXRlQ2xpY2siLCJfcG9wdXBEZWxldGVCdXR0b25FbGVtZW50IiwicG9wdXBEZWxldGVDb25maXJtYXRpb25CdXR0b25TZWxlY3RvciIsIl9oYW5kbGVEZWxldGVDb25maXJtYXRpb25TdWJtaXQiLCJoYW5kbGVEZWxldGVDb25maXJtYXRpb25TdWJtaXQiLCJfaW5pdGlhdGVMaWtlcyIsInNldExpa2VzIiwiaXNMaWtlZCIsIl90b2dnbGVMaWtlQnV0dG9uIiwiZmluZCIsInVzZXIiLCJfbGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsImxlbmd0aCIsImdldENhcmRJZCIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2siLCJfaGFuZGxlQ29uZmlybWVkRGVsZXRlQ2xpY2siLCJfcmVtb3ZlQ2FyZExvY2FsIiwiX2lzT3duZXIiLCJfZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3BvcHVsYXRlQ2FyZEluZm8iLCJjYXJkVGl0bGVFbGVtZW50IiwiY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImdldENhcmQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsInVzZXJJbnB1dE5hbWUiLCJ1c2VySW5wdXRQcm9mZXNzaW9uIiwiYWRkR2FsbGVyeUl0ZW1CdXR0b24iLCJpbml0aWFsQ2FyZHMiLCJwcmV2aWV3UG9wdXBTZWxlY3RvciIsImxvYWRpbmdQb3B1cCIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9wb3B1cENsb3NlQnV0dG9uIiwiX3BvcHVwQWN0aXZlVG9nZ2xlU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUJhY2tncm91bmRDbGlja0Nsb3NlIiwiY2xvc2UiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaGFuZGxlU3VibWl0QnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiZnJvbSIsInJlZHVjZSIsImFjYyIsImlucHV0IiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsImFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIlN0YXR1c1RleHQiLCJnZXRVc2VySW5mbyIsInVybFBhdGgiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJlZGl0UHJvZmlsZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0QXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdENhcmQiLCJhZGRDYXJkIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUxpa2UiLCJhZGRMaWtlIiwiYXV0aG9yaXphdGlvbiIsImNhcmRDb25maWciLCJwcmV2aWV3UG9wdXBFbGVtZW50IiwiY29uc3RhbnQiLCJkZXNjcmlwdGlvbiIsInBvcHVwV2l0aEltYWdlIiwiY2FyZElkIiwiY2FyZCIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInBvcHVwRGVsZXRlQ29uZmlybWF0aW9uIiwiYWxsIiwidXNlckRhdGEiLCJjYXJkcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiY2FyZFJlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJlcnJvciIsInJlbmRlckRlZmF1bHRQYWdlIiwiYWxlcnQiLCJmaW5hbGx5IiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlclByb2Zlc3Npb25FbGVtZW50IiwiX3VzZXJBdmF0YXIiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfcHJldmlld1BvcHVwSW1hZ2UiLCJfcHJldmlld1BvcHVwRGVzY3JpcHRpb24iLCJwb3B1cFdpdGhGb3JtUHJvZmlsZSIsInVzZXJJbnB1dCIsInN1Ym1pdEJ1dHRvblByb2ZpbGUiLCJwb3B1cFdpdGhGb3JtSW1hZ2UiLCJuZXdJdGVtU3VibWl0QnV0dG9uIiwibmV3SXRlbVRpdGxlIiwibmV3SXRlbUltYWdlTGluayIsImFkZEl0ZW0iLCJwb3B1cFdpdGhBdmF0YXJGb3JtIiwic3VibWl0QnV0dG9uQXZhdGFyIiwiRXJyb3IiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsIm5ld0NhcmRGb3JtVmFsaWRhdG9yIiwicG9maWxlQXZhdGFyRm9ybVZhbGlkYXRpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwiT2JqZWN0Iiwia2V5cyIsInJldmVyc2UiLCJpdGVtIiwibmV3RWxlbWVudCIsInByZXBlbmQiLCJjYXJkSXRlbSIsImluZm8iXSwic291cmNlUm9vdCI6IiJ9